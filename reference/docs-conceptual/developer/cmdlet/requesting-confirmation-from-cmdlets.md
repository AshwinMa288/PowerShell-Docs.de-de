---
title: Anfordern der Bestätigung von Cmdlets | Microsoft-Dokumentation
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- ConfirmImpact [PowerShell Programmer's Guide], described
- ShouldContinue [PowerShell Programmer's Guide], described
- user feedback [PowerShell Programmer's Guide], requesting
- ShouldProcess [PowerShell Programmer's Guide], described
- ConfirmPreference [PowerShell Programmer's Guide], described
ms.assetid: 37d6e87f-57b7-40bd-b645-392cf0b6e88e
caps.latest.revision: 13
ms.openlocfilehash: 0c0517ef7fbd5ae6434773a2dfe276f3a8c35f39
ms.sourcegitcommit: debd2b38fb8070a7357bf1a4bf9cc736f3702f31
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/05/2019
ms.locfileid: "72369529"
---
# <a name="requesting-confirmation-from-cmdlets"></a><span data-ttu-id="0c112-102">Anfordern der Bestätigung von Cmdlets</span><span class="sxs-lookup"><span data-stu-id="0c112-102">Requesting Confirmation from Cmdlets</span></span>

<span data-ttu-id="0c112-103">Cmdlets sollten eine Bestätigung anfordern, wenn Sie im Begriff sind, Änderungen am System vorzunehmen, das sich außerhalb der Windows PowerShell-Umgebung befindet.</span><span class="sxs-lookup"><span data-stu-id="0c112-103">Cmdlets should request confirmation when they are about to make a change to the system that is outside of the Windows PowerShell environment.</span></span> <span data-ttu-id="0c112-104">Wenn ein Cmdlet z. b. das Hinzufügen eines Benutzerkontos oder das Abbrechen eines Prozesses durchführt, sollte das Cmdlet eine Bestätigung des Benutzers erfordern, bevor es fortgesetzt wird.</span><span class="sxs-lookup"><span data-stu-id="0c112-104">For example, if a cmdlet is about to add a user account or stop a process, the cmdlet should require confirmation from the user before it proceeds.</span></span> <span data-ttu-id="0c112-105">Wenn im Gegensatz dazu ein Cmdlet eine Windows PowerShell-Variable ändern soll, muss das Cmdlet keine Bestätigung erfordern.</span><span class="sxs-lookup"><span data-stu-id="0c112-105">In contrast, if a cmdlet is about to change a Windows PowerShell variable, the cmdlet does not need to require confirmation.</span></span>

<span data-ttu-id="0c112-106">Um eine Bestätigungs Anforderung zu stellen, muss das Cmdlet angeben, dass Bestätigungs Anforderungen unterstützt werden. Außerdem muss das Cmdlet die Methoden " [System. Management. Automation. Cmdlet. Schulter dprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) " und " [System. Management. Automation. Cmdlet. dendcontinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) " (optional) aufrufen, um eine Bestätigungs Anforderungs Nachricht anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="0c112-106">In order to make a confirmation request, the cmdlet must indicate that it supports confirmation requests, and it must call the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) and [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) (optional) methods to display a confirmation request message.</span></span>

## <a name="supporting-confirmation-requests"></a><span data-ttu-id="0c112-107">Unterstützen von Bestätigungs Anforderungen</span><span class="sxs-lookup"><span data-stu-id="0c112-107">Supporting Confirmation Requests</span></span>

<span data-ttu-id="0c112-108">Zur Unterstützung von Bestätigungs Anforderungen muss das Cmdlet den `SupportsShouldProcess`-Parameter des Cmdlet-Attributs auf `true`festlegen.</span><span class="sxs-lookup"><span data-stu-id="0c112-108">To support confirmation requests, the cmdlet must set the `SupportsShouldProcess` parameter of the Cmdlet attribute to `true`.</span></span> <span data-ttu-id="0c112-109">Dadurch werden die von Windows PowerShell bereitgestellten `Confirm`-und `WhatIf`-Cmdlet-Parameter aktiviert.</span><span class="sxs-lookup"><span data-stu-id="0c112-109">This enables the `Confirm` and `WhatIf` cmdlet parameters that are provided by Windows PowerShell.</span></span> <span data-ttu-id="0c112-110">Mit dem `Confirm`-Parameter kann der Benutzer steuern, ob die Bestätigungs Anforderung angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="0c112-110">The `Confirm` parameter allows the user to control whether the confirmation request is displayed.</span></span> <span data-ttu-id="0c112-111">Mit dem `WhatIf`-Parameter kann der Benutzer bestimmen, ob das Cmdlet eine Meldung anzeigen oder seine Aktion ausführen soll.</span><span class="sxs-lookup"><span data-stu-id="0c112-111">The `WhatIf` parameter allows the user to determine whether the cmdlet should display a message or perform its action.</span></span> <span data-ttu-id="0c112-112">Fügen Sie die Parameter `Confirm` und `WhatIf` nicht manuell zu einem Cmdlet hinzu.</span><span class="sxs-lookup"><span data-stu-id="0c112-112">Do not manually add the `Confirm` and `WhatIf` parameters to a cmdlet.</span></span>

<span data-ttu-id="0c112-113">Das folgende Beispiel zeigt eine Cmdlet-Attribut Deklaration, die Bestätigungs Anforderungen unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0c112-113">The following example shows a Cmdlet attribute declaration that supports confirmation requests.</span></span>

```csharp
[Cmdlet(VerbsDiagnostic.Test, "RequestConfirmationTemplate1",
        SupportsShouldProcess = true)]
```

## <a name="calling-the-confirmation-request-methods"></a><span data-ttu-id="0c112-114">Aufrufen der Bestätigungs Anforderungs Methoden</span><span class="sxs-lookup"><span data-stu-id="0c112-114">Calling the Confirmation request methods</span></span>

<span data-ttu-id="0c112-115">Geben Sie im Cmdlet-Code die [System. Management. Automation. Cmdlet. schuldprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) -Methode vor dem Vorgang an, durch den das System geändert wird.</span><span class="sxs-lookup"><span data-stu-id="0c112-115">In the cmdlet code, call the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method before the operation that changes the system is performed.</span></span> <span data-ttu-id="0c112-116">Entwerfen Sie das Cmdlet so, dass der Vorgang, wenn der-Rückruf den Wert `false`zurückgibt, nicht ausgeführt wird und das Cmdlet den nächsten Vorgang verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="0c112-116">Design the cmdlet so that if the call returns a value of `false`, the operation is not performed, and the cmdlet processes the next operation.</span></span>

## <a name="calling-the-shouldcontinue-method"></a><span data-ttu-id="0c112-117">Aufrufen der Methode "schuldcontinue"</span><span class="sxs-lookup"><span data-stu-id="0c112-117">Calling the ShouldContinue Method</span></span>

<span data-ttu-id="0c112-118">Die meisten Cmdlets fordern eine Bestätigung nur mithilfe der [System. Management. Automation. Cmdlet. schuldprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) -Methode an.</span><span class="sxs-lookup"><span data-stu-id="0c112-118">Most cmdlets request confirmation using only the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method.</span></span> <span data-ttu-id="0c112-119">In einigen Fällen ist jedoch möglicherweise eine zusätzliche Bestätigung erforderlich.</span><span class="sxs-lookup"><span data-stu-id="0c112-119">However, some cases might require additional confirmation.</span></span> <span data-ttu-id="0c112-120">Ergänzen Sie in diesen Fällen den " [System. Management. Automation. Cmdlet. Schulter dprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) "-Befehl durch einen Rückruf der [System. Management. Automation. Cmdlet. Schulter dcontinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) -Methode.</span><span class="sxs-lookup"><span data-stu-id="0c112-120">For these cases, supplement the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) call with a call to the [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) method.</span></span> <span data-ttu-id="0c112-121">Dadurch kann das Cmdlet oder der Anbieter den Gültigkeitsbereich der ja-Antwort auf die **gesamte** Antwort der Bestätigungsaufforderung besser steuern.</span><span class="sxs-lookup"><span data-stu-id="0c112-121">This allows the cmdlet or provider to more finely control the scope of the **Yes to all** response to the confirmation prompt.</span></span>

<span data-ttu-id="0c112-122">Wenn ein Cmdlet die [System. Management. Automation. Cmdlet. schuldcontinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) -Methode aufruft, muss das Cmdlet auch einen `Force` Switch-Parameter bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="0c112-122">If a cmdlet calls the [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) method, the cmdlet must also provide a `Force` switch parameter.</span></span> <span data-ttu-id="0c112-123">Wenn der Benutzer `Force` angibt, wenn der Benutzer das Cmdlet aufruft, sollte das Cmdlet weiterhin " [System. Management. Automation. Cmdlet. schuldprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess)" aufrufen, sollte jedoch den Aufruf von " [System. Management. Automation. Cmdlet. undcontinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue)" umgehen.</span><span class="sxs-lookup"><span data-stu-id="0c112-123">If the user specifies `Force` when the user invokes the cmdlet, the cmdlet should still call [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess), but it should bypass the call to [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span></span>

<span data-ttu-id="0c112-124">[System. Management. Automation. Cmdlet. tiondcontinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) löst eine Ausnahme aus, wenn Sie von einer nicht interaktiven Umgebung aufgerufen wird, in der der Benutzer nicht dazu aufgefordert werden kann.</span><span class="sxs-lookup"><span data-stu-id="0c112-124">[System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) will throw an exception when it is called from a non-interactive environment where the user cannot be prompted.</span></span> <span data-ttu-id="0c112-125">Durch das Hinzufügen eines `Force`-Parameters wird sichergestellt, dass der Befehl immer noch ausgeführt werden kann, wenn er in einer nicht interaktiven Umgebung aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="0c112-125">Adding a `Force` parameter ensures that the command can still be performed when it is invoked in a non-interactive environment.</span></span>

<span data-ttu-id="0c112-126">Im folgenden Beispiel wird gezeigt, wie " [System. Management. Automation. Cmdlet. Schulter dprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) " und " [System. Management. Automation. Cmdlet. daudcontinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue)" aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="0c112-126">The following example shows how to call [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) and [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span></span>

```csharp
if (ShouldProcess (...) )
{
  if (Force || ShouldContinue(...))
  {
     // Add code that performs the operation.
  }
}
```

<span data-ttu-id="0c112-127">Abhängig von der Umgebung, in der das Cmdlet aufgerufen wird, kann das Verhalten eines " [System. Management. Automation. Cmdlet. daudprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) "-Aufrufes variieren.</span><span class="sxs-lookup"><span data-stu-id="0c112-127">The behavior of a [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) call can vary depending on the environment in which the cmdlet is invoked.</span></span> <span data-ttu-id="0c112-128">Mithilfe der vorherigen Richtlinien wird sichergestellt, dass sich das Cmdlet unabhängig von der Host Umgebung konsistent mit anderen Cmdlets verhält.</span><span class="sxs-lookup"><span data-stu-id="0c112-128">Using the previous guidelines will help ensure that the cmdlet behaves consistently with other cmdlets, regardless of the host environment.</span></span>

<span data-ttu-id="0c112-129">Ein Beispiel für den Aufruf der [System. Management. Automation. Cmdlet. tiondprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) -Methode finden [Sie unter Anfordern von Bestätigungen](./how-to-request-confirmations.md).</span><span class="sxs-lookup"><span data-stu-id="0c112-129">For an example of calling the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method, see [How to Request Confirmations](./how-to-request-confirmations.md).</span></span>

## <a name="specify-the-impact-level"></a><span data-ttu-id="0c112-130">Festlegen der Auswirkungs Stufe</span><span class="sxs-lookup"><span data-stu-id="0c112-130">Specify the Impact Level</span></span>

<span data-ttu-id="0c112-131">Wenn Sie das Cmdlet erstellen, geben Sie die Auswirkungs Stufe (Schweregrad) der Änderung an.</span><span class="sxs-lookup"><span data-stu-id="0c112-131">When you create the cmdlet, specify the impact level (the severity) of the change.</span></span> <span data-ttu-id="0c112-132">Legen Sie zu diesem Zweck den Wert des `ConfirmImpact`-Parameters des Cmdlet-Attributs auf "hoch", "Mittel" oder "niedrig" fest.</span><span class="sxs-lookup"><span data-stu-id="0c112-132">To do this, set the value of the `ConfirmImpact` parameter of the Cmdlet attribute to High, Medium, or Low.</span></span> <span data-ttu-id="0c112-133">Sie können einen Wert für `ConfirmImpact` nur angeben, wenn Sie auch den Parameter `SupportsShouldProcess` für das Cmdlet angeben.</span><span class="sxs-lookup"><span data-stu-id="0c112-133">You can specify a value for `ConfirmImpact` only when you also specify the `SupportsShouldProcess` parameter for the cmdlet.</span></span>

<span data-ttu-id="0c112-134">Bei den meisten Cmdlets müssen Sie `ConfirmImpact`nicht explizit angeben.</span><span class="sxs-lookup"><span data-stu-id="0c112-134">For most cmdlets, you do not have to explicitly specify `ConfirmImpact`.</span></span>  <span data-ttu-id="0c112-135">Verwenden Sie stattdessen die Standardeinstellung des-Parameters, der Mittel ist.</span><span class="sxs-lookup"><span data-stu-id="0c112-135">Instead, use the default setting of the parameter, which is Medium.</span></span> <span data-ttu-id="0c112-136">Wenn Sie `ConfirmImpact` auf "hoch" festlegen, wird der Vorgang standardmäßig bestätigt.</span><span class="sxs-lookup"><span data-stu-id="0c112-136">If you set `ConfirmImpact` to High, the operation will be confirmed by default.</span></span> <span data-ttu-id="0c112-137">Reservieren Sie diese Einstellung für hochgradig unterbrechungsfreie Aktionen, z. b. das Neuformatieren eines Festplatten Laufwerks.</span><span class="sxs-lookup"><span data-stu-id="0c112-137">Reserve this setting for highly disruptive actions, such as reformatting a hard-disk volume.</span></span>

## <a name="calling-non-confirmation-methods"></a><span data-ttu-id="0c112-138">Aufrufen von nicht-Bestätigungs Methoden</span><span class="sxs-lookup"><span data-stu-id="0c112-138">Calling Non-Confirmation Methods</span></span>

<span data-ttu-id="0c112-139">Wenn das Cmdlet oder der Anbieter eine Nachricht senden, aber keine Bestätigung anfordern muss, können die folgenden drei Methoden aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="0c112-139">If the cmdlet or provider must send a message but not request confirmation, it can call the following three methods.</span></span> <span data-ttu-id="0c112-140">Vermeiden Sie die Verwendung der [System. Management. Automation. Cmdlet. WriteObject](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) -Methode zum Senden von Nachrichten dieser Typen, weil die [System. Management. Automation. Cmdlet. WriteObject](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) -Ausgabe mit der normalen Ausgabe des Cmdlets oder Anbieters intermiert ist, wodurch das Schreiben von Skripts schwierig wird.</span><span class="sxs-lookup"><span data-stu-id="0c112-140">Avoid using the [System.Management.Automation.Cmdlet.WriteObject](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) method to send messages of these types because [System.Management.Automation.Cmdlet.WriteObject](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) output is intermingled with the normal output of your cmdlet or provider, which makes script writing difficult.</span></span>

- <span data-ttu-id="0c112-141">Um den Benutzer zu warnen und den Vorgang fortzusetzen, kann das Cmdlet oder der Anbieter die [System. Management. Automation. Cmdlet. Write Warning](/dotnet/api/System.Management.Automation.Cmdlet.WriteWarning) -Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="0c112-141">To caution the user and continue with the operation, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.WriteWarning](/dotnet/api/System.Management.Automation.Cmdlet.WriteWarning) method.</span></span>

- <span data-ttu-id="0c112-142">Um zusätzliche Informationen bereitzustellen, die der Benutzer mit dem `Verbose`-Parameter abrufen kann, kann das Cmdlet oder der Anbieter die [System. Management. Automation. Cmdlet. Write](/dotnet/api/System.Management.Automation.Cmdlet.WriteVerbose) Items-Methode aufrufen.</span><span class="sxs-lookup"><span data-stu-id="0c112-142">To provide additional information that the user can retrieve using the `Verbose` parameter, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.WriteVerbose](/dotnet/api/System.Management.Automation.Cmdlet.WriteVerbose) method.</span></span>

- <span data-ttu-id="0c112-143">Zum Bereitstellen von Details auf Debugebene für andere Entwickler oder für den Produktsupport kann das Cmdlet oder der Anbieter die [System. Management. Automation. Cmdlet. Write Team Debug](/dotnet/api/System.Management.Automation.Cmdlet.WriteDebug) -Methode abrufen.</span><span class="sxs-lookup"><span data-stu-id="0c112-143">To provide debugging-level detail for other developers or for product support, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.WriteDebug](/dotnet/api/System.Management.Automation.Cmdlet.WriteDebug) method.</span></span> <span data-ttu-id="0c112-144">Der Benutzer kann diese Informationen mithilfe des `Debug`-Parameters abrufen.</span><span class="sxs-lookup"><span data-stu-id="0c112-144">The user can retrieve this information using the `Debug` parameter.</span></span>

<span data-ttu-id="0c112-145">Cmdlets und Anbieter wenden zuerst die folgenden Methoden an, um eine Bestätigung anzufordern, bevor Sie versuchen, einen Vorgang auszuführen, der ein System außerhalb von Windows PowerShell ändert:</span><span class="sxs-lookup"><span data-stu-id="0c112-145">Cmdlets and providers first call the following methods to request confirmation before they attempt to perform an operation that changes a system outside of Windows PowerShell:</span></span>

- [<span data-ttu-id="0c112-146">System. Management. Automation. Cmdlet. schuldprocess</span><span class="sxs-lookup"><span data-stu-id="0c112-146">System.Management.Automation.Cmdlet.Shouldprocess</span></span>](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess)

- [<span data-ttu-id="0c112-147">System. Management. Automation. Provider. cmdletprovider. schuldprocess</span><span class="sxs-lookup"><span data-stu-id="0c112-147">System.Management.Automation.Provider.Cmdletprovider.Shouldprocess</span></span>](/dotnet/api/System.Management.Automation.Provider.CmdletProvider.ShouldProcess)

<span data-ttu-id="0c112-148">Dies erfolgt durch Aufrufen der [System. Management. Automation. Cmdlet. tiondprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) -Methode, die den Benutzer auffordert, den Vorgang zu bestätigen, je nachdem, wie der Benutzer den Befehl aufgerufen hat.</span><span class="sxs-lookup"><span data-stu-id="0c112-148">They do so by calling the [System.Management.Automation.Cmdlet.Shouldprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method, which prompts the user to confirm the operation based on how the user invoked the command.</span></span>

## <a name="see-also"></a><span data-ttu-id="0c112-149">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="0c112-149">See Also</span></span>

[<span data-ttu-id="0c112-150">Schreiben eines Windows PowerShell-Cmdlets</span><span class="sxs-lookup"><span data-stu-id="0c112-150">Writing a Windows PowerShell Cmdlet</span></span>](./writing-a-windows-powershell-cmdlet.md)
