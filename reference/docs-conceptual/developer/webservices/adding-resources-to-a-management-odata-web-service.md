---
title: Hinzufügen von Ressourcen zu einem Management odata-Webdienst | Microsoft-Dokumentation
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e620bf6d-76be-47b0-a7a8-f43418f30c60
caps.latest.revision: 6
ms.openlocfilehash: b81a32b867795ae51c3f5308c2f82c31ed2747fa
ms.sourcegitcommit: debd2b38fb8070a7357bf1a4bf9cc736f3702f31
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/05/2019
ms.locfileid: "72359819"
---
# <a name="adding-resources-to-a-management-odata-web-service"></a><span data-ttu-id="82aea-102">Hinzufügen von Ressourcen zu einem Management OData-Webdienst</span><span class="sxs-lookup"><span data-stu-id="82aea-102">Adding Resources to a Management OData Web Service</span></span>

<span data-ttu-id="82aea-103">In diesem Beispiel wird veranschaulicht, wie mithilfe des odata-Schema-Designers von Management eine Ressource zu einem vorhandenen verwaltungsodata-Webdienst hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="82aea-103">This example demonstrates how to add a resource to an existing Management OData web service by using the Management OData Schema Designer.</span></span> <span data-ttu-id="82aea-104">Das [psexsrolebasedplugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) -Beispiel erstellt einen Webdienst, der die Prozess-und Server Ressourcen verfügbar macht.</span><span class="sxs-lookup"><span data-stu-id="82aea-104">The [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample creates a web service that exposes the Process and Server resources.</span></span> <span data-ttu-id="82aea-105">In diesem Beispiel fügen Sie dem Webdienst eine VM-Ressource (Virtual Machine, virtueller Computer) hinzu.</span><span class="sxs-lookup"><span data-stu-id="82aea-105">In this example, you will add a Virtual Machine (VM) resource to the web service.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="82aea-106">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="82aea-106">Prerequisites</span></span>

<span data-ttu-id="82aea-107">In diesem Thema wird davon ausgegangen, dass Sie das Beispiel " [pswsrolebasedplugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) " heruntergeladen und installiert haben, wie unter [Erstellen eines Windows PowerShell-Webdiensts](./creating-a-management-odata-web-service.md)beschrieben, und dass Sie den [Management odata-Schema-Designer](https://marketplace.visualstudio.com/items?itemName=jlisc0.ManagementODataSchemaDesigner)heruntergeladen und installiert haben.</span><span class="sxs-lookup"><span data-stu-id="82aea-107">This topic assumes that you have downloaded and installed the [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample as described in [Creating a Windows PowerShell Web Service](./creating-a-management-odata-web-service.md), and that you have downloaded and installed the [Management OData Schema Designer](https://marketplace.visualstudio.com/items?itemName=jlisc0.ManagementODataSchemaDesigner).</span></span> <span data-ttu-id="82aea-108">In diesem Thema wird auch davon ausgegangen, dass Sie das Hyper-V Windows PowerShell-Modul auf dem Computer installiert haben, auf dem Sie den odata-Verwaltungs Endpunkt einrichten.</span><span class="sxs-lookup"><span data-stu-id="82aea-108">This topic also assumes that you have the Hyper-V Windows PowerShell module installed on the computer where you set up the Management Odata endpoint.</span></span>

## <a name="adding-vm-as-a-resource-to-the-web-service"></a><span data-ttu-id="82aea-109">Hinzufügen einer VM als Ressource zum Webdienst</span><span class="sxs-lookup"><span data-stu-id="82aea-109">Adding VM as a Resource to the Web Service</span></span>

<span data-ttu-id="82aea-110">Der erste Schritt besteht darin, das Schema aus dem vorhandenen Verwaltungs-odata-Endpunkt in den Schema-Designer zu importieren.</span><span class="sxs-lookup"><span data-stu-id="82aea-110">The first step is to import the schema from the existing Management OData endpoint into the schema designer.</span></span> <span data-ttu-id="82aea-111">Dies wird im folgenden Verfahren beschrieben.</span><span class="sxs-lookup"><span data-stu-id="82aea-111">The following procedure describes how to do that.</span></span>

#### <a name="importing-an-existing-schema-into-the-schema-designer"></a><span data-ttu-id="82aea-112">Importieren eines vorhandenen Schemas in den Schema-Designer</span><span class="sxs-lookup"><span data-stu-id="82aea-112">Importing an existing schema into the schema designer</span></span>

1. <span data-ttu-id="82aea-113">Öffnen Sie den Verwaltungs-odata-Schema-Designer.</span><span class="sxs-lookup"><span data-stu-id="82aea-113">Open the Management OData Schema Designer.</span></span>

2. <span data-ttu-id="82aea-114">Wählen Sie im Menü **Datei** die Option **Datei** aus. **Neu** ; **Datei**.</span><span class="sxs-lookup"><span data-stu-id="82aea-114">From the **File** menu, select **File** ; **New** ; **File**.</span></span> <span data-ttu-id="82aea-115">Das Dialogfeld **neue Datei** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="82aea-115">The **New File** dialog appears.</span></span>

3. <span data-ttu-id="82aea-116">Klicken Sie auf **Verwaltung odata-Modell**, und klicken Sie dann auf **Öffnen**.</span><span class="sxs-lookup"><span data-stu-id="82aea-116">Click **Management OData Model**, and then click **Open**.</span></span>

4. <span data-ttu-id="82aea-117">Klicken Sie mit der rechten Maustaste auf das Hauptfenster, und klicken Sie auf **Schema Datei** ;. **Importieren**Sie.</span><span class="sxs-lookup"><span data-stu-id="82aea-117">Right-click in the main window, and click **Schema file** ; **Import**.</span></span> <span data-ttu-id="82aea-118">Das Dialogfeld **Öffnen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="82aea-118">The **Open** dialog appears.</span></span>

5. <span data-ttu-id="82aea-119">Navigieren Sie zu dem Ordner, in dem Sie den Management odata-Webdienst für das Beispiel " [pwaysrolebasedplugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) " einrichten.</span><span class="sxs-lookup"><span data-stu-id="82aea-119">Navigate to the folder where you set up the Management OData web service for the [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample.</span></span> <span data-ttu-id="82aea-120">Wenn Sie das in diesem Beispiel bereitgestellte Windows PowerShell-Skript verwendet haben, um den Endpunkt einzurichten, ohne das Skript zu ändern, lautet der Ordner **c:\inetpub\wwwroot\mudata**.</span><span class="sxs-lookup"><span data-stu-id="82aea-120">If you used the Windows PowerShell script provided with that sample to set up the endpoint without modifying the script, that folder is **C:\inetpub\wwwroot\Modata**.</span></span> <span data-ttu-id="82aea-121">Wählen Sie Schema. MOF aus, und klicken Sie auf **Öffnen**.</span><span class="sxs-lookup"><span data-stu-id="82aea-121">Select Schema.mof, and click **Open**.</span></span>

   <span data-ttu-id="82aea-122">Öffnen Sie an diesem Punkt die Dateien "Schema. mof" und "Schema. xml" in einem Text-Editor, und beachten Sie, dass Sie Zuordnungen für die Prozess-und Dienst Ressourcen enthalten.</span><span class="sxs-lookup"><span data-stu-id="82aea-122">At this point, open the Schema.mof and Schema.xml files in a text editor, and notice that they contain mappings for the Process and Service resources.</span></span> <span data-ttu-id="82aea-123">Die Datei "Schema. mof" verwendet den MOF (Managed [Management Task Force](https://www.dmtf.org/) )-Standard (DTMF).</span><span class="sxs-lookup"><span data-stu-id="82aea-123">The Schema.mof file uses [Distributed Management  Task Force](https://www.dmtf.org/) (DTMF) Managed Object (MOF) standard.</span></span> <span data-ttu-id="82aea-124">Die Datei "Schema. xml" verwendet ein XML-Schema, das unter [Ressourcen Zuordnung Schema](./resource-mapping-schema.md)beschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="82aea-124">The schema.xml file uses an XML schema that is described in [Resource Mapping Schema](./resource-mapping-schema.md).</span></span>

   <span data-ttu-id="82aea-125">Im folgenden Verfahren wird beschrieben, wie Hyper-V-Cmdlets in in das Schema Modell importiert werden.</span><span class="sxs-lookup"><span data-stu-id="82aea-125">The following procedure describes how to import Hyper-V cmdlets in to the schema model.</span></span>

#### <a name="importing-cmdlets-into-the-schema"></a><span data-ttu-id="82aea-126">Importieren von Cmdlets in das Schema</span><span class="sxs-lookup"><span data-stu-id="82aea-126">Importing cmdlets into the schema</span></span>

1. <span data-ttu-id="82aea-127">Klicken Sie mit der rechten Maustaste auf einen leeren Bereich des Fensters Schema-Designer, und klicken Sie dann auf **Cmdlets importieren**.</span><span class="sxs-lookup"><span data-stu-id="82aea-127">Right-click on a blank area of the schema designer window, and click **Import Cmdlets**.</span></span> <span data-ttu-id="82aea-128">Das Dialogfeld **Cmdlet-Import-Assistent** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="82aea-128">The **Cmdlet Import Wizard** dialog appears.</span></span>

2. <span data-ttu-id="82aea-129">Stellen Sie sicher, dass **lokaler Computer** ausgewählt ist, und klicken Sie auf **weiter**.</span><span class="sxs-lookup"><span data-stu-id="82aea-129">Make sure **Local Computer** is selected, and click **Next**.</span></span>

3. <span data-ttu-id="82aea-130">Stellen Sie sicher, dass installierte Windows PowerShell-Module ausgewählt ist, und wählen Sie in der Dropdown Liste die Option Hyper-V aus.</span><span class="sxs-lookup"><span data-stu-id="82aea-130">Make sure that Installed Windows PowerShell Modules is selected, and select Hyper-V from the drop-down list.</span></span> <span data-ttu-id="82aea-131">Klicken Sie auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="82aea-131">click **Next**.</span></span> <span data-ttu-id="82aea-132">Klicken Sie auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="82aea-132">Click **Next**.</span></span>

4. <span data-ttu-id="82aea-133">Wählen Sie in der **Cmdlet-Substantiv** Liste die Option **VM**aus.</span><span class="sxs-lookup"><span data-stu-id="82aea-133">In the **Cmdlet Noun** list, select **VM**.</span></span> <span data-ttu-id="82aea-134">Klicken Sie auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="82aea-134">Click **Next**</span></span>

5. <span data-ttu-id="82aea-135">In diesem Beispiel werden nur die Get-und DELETE-Befehle mit Cmdlets gebunden.</span><span class="sxs-lookup"><span data-stu-id="82aea-135">For this example, we will bind only the Get and Delete commands with cmdlets.</span></span> <span data-ttu-id="82aea-136">Deaktivieren Sie die Kontrollkästchen **Erstellen** und **Aktualisieren** , und stellen Sie sicher, dass die Kontrollkästchen **Get** und **Delete** aktiviert sind.</span><span class="sxs-lookup"><span data-stu-id="82aea-136">Clear the **CREATE** and **UPDATE** checkboxes, and make sure the **GET** and **DELETE** checkboxes are checked.</span></span> <span data-ttu-id="82aea-137">Stellen Sie sicher, dass das Cmdlet "`Get-VM`" für **Get**ausgewählt ist, und dass das `Remove-VM`-Cmdlet zum **Löschen**ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="82aea-137">Make sure that the `Get-VM` cmdlet is selected for **GET**, and the `Remove-VM` cmdlet is selected for **DELETE**.</span></span>

6. <span data-ttu-id="82aea-138">Da in den Metadaten für die VM-Cmdlets kein Ausgabetyp angegeben ist, müssen Sie das Cmdlet ausführen, um den Ausgabetyp anzugeben.</span><span class="sxs-lookup"><span data-stu-id="82aea-138">Because the metadata for the VM cmdlets does not specify an output type, you will need to run the cmdlet to specify the output type.</span></span> <span data-ttu-id="82aea-139">Wählen Sie geben Sie den **Ausgabetyp** aus, und klicken Sie auf **Ausführen**</span><span class="sxs-lookup"><span data-stu-id="82aea-139">Select **Provide output type** and click **Run cmdlet**.</span></span> <span data-ttu-id="82aea-140">Das Dialogfeld " **Cmdlet ausführen** " wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="82aea-140">The **Run Cmdlet** dialog appears.</span></span> <span data-ttu-id="82aea-141">Klicken Sie auf **Ausführen**.</span><span class="sxs-lookup"><span data-stu-id="82aea-141">Click **Run**.</span></span> <span data-ttu-id="82aea-142">Das Feld für den **CLR-Typ** wird mit dem `VirtualMachine`-Typ aufgefüllt.</span><span class="sxs-lookup"><span data-stu-id="82aea-142">The **CLR Type** box is populated with the `VirtualMachine` type.</span></span> <span data-ttu-id="82aea-143">Klicken Sie auf **OK**, und klicken Sie dann auf **weiter**.</span><span class="sxs-lookup"><span data-stu-id="82aea-143">Click **OK**, then click **Next**.</span></span>

7. <span data-ttu-id="82aea-144">Standardmäßig sind alle Eigenschaften des virtualmachine-Objekts ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="82aea-144">By default, all of the properties of the VirtualMachine object are selected.</span></span> <span data-ttu-id="82aea-145">Sie können alle Eigenschaften löschen, die nicht als Teil der Daten angezeigt werden sollen, die zurückgegeben werden, wenn Sie diese Ressource vom Webdienst anfordern.</span><span class="sxs-lookup"><span data-stu-id="82aea-145">You can clear any properties that you do not want as part of the data returned when you request this resource from the web service.</span></span> <span data-ttu-id="82aea-146">Klicken Sie auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="82aea-146">Click **Next**.</span></span>

8. <span data-ttu-id="82aea-147">Sie müssen mindestens eine Eigenschaft auswählen, die als Schlüssel verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="82aea-147">You must select at least one property to be used as a key.</span></span> <span data-ttu-id="82aea-148">Wählen Sie in der Liste **Name** aus, und klicken Sie auf **weiter**.</span><span class="sxs-lookup"><span data-stu-id="82aea-148">Select **Name** in the list, and click **Next**.</span></span>

9. <span data-ttu-id="82aea-149">Im nächsten Fenster können Sie Eigenschaften der odata-Verwaltungs Ressource den Eigenschaften der zugrunde liegenden Cmdlets zuordnen.</span><span class="sxs-lookup"><span data-stu-id="82aea-149">The next window allows you to map properties of the Management OData resource to properties of the underlying cmdlets.</span></span> <span data-ttu-id="82aea-150">Der Assistent ordnet Eigenschaften standardmäßig identischen Namen zu.</span><span class="sxs-lookup"><span data-stu-id="82aea-150">The wizard maps properties with identical names by default.</span></span> <span data-ttu-id="82aea-151">Beispielsweise wird die `ComputerName`-Eigenschaft der Ressource der Eigenschaft `ComputerName` der Cmdlets zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="82aea-151">For example, the `ComputerName` property of the resource is mapped to the `ComputerName` property of the cmdlets.</span></span>  <span data-ttu-id="82aea-152">Auf diese Weise können Sie die `ComputerName`-Eigenschaft in einer Anforderung an den Webdienst angeben und angeben, dass der angegebene Wert an das `Get-VM`-Cmdlet übergeben werden soll.</span><span class="sxs-lookup"><span data-stu-id="82aea-152">This allows you to specify the `ComputerName` property in a request to the web service, and have the value you specify be passed to the `Get-VM` cmdlet.</span></span> <span data-ttu-id="82aea-153">`Id` und `Name` werden ebenfalls standardmäßig zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="82aea-153">`Id` and `Name` are also mapped by default.</span></span>

   10. <span data-ttu-id="82aea-154">Klicken Sie auf **weiter**und dann auf **Fertig**stellen.</span><span class="sxs-lookup"><span data-stu-id="82aea-154">Click **Next**, then click **Finish**.</span></span>

       <span data-ttu-id="82aea-155">Die VM-Ressource wird jetzt im Fenster Schema-Designer angezeigt.</span><span class="sxs-lookup"><span data-stu-id="82aea-155">The VM resource now appears in the schema designer window.</span></span> <span data-ttu-id="82aea-156">Sie können die Eigenschaften und Vorgänge untersuchen, die der Ressource zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="82aea-156">You can examine the properties and operations associated with the resource.</span></span> <span data-ttu-id="82aea-157">Als nächstes exportieren Sie die aktualisierten Schema Dateien in das virtuelle Verzeichnis für den Webdienst.</span><span class="sxs-lookup"><span data-stu-id="82aea-157">Next, you will export the updated schema files into the virtual directory for the web service.</span></span>

#### <a name="exporting-schema-files-from-the-schema-designer"></a><span data-ttu-id="82aea-158">Exportieren von Schema Dateien aus dem Schema-Designer</span><span class="sxs-lookup"><span data-stu-id="82aea-158">Exporting schema files from the schema designer</span></span>

1. <span data-ttu-id="82aea-159">Klicken Sie mit der rechten Maustaste auf einen leeren Bereich des Schema-Designer-Fensters, und klicken Sie auf **Schema Datei** ;. **Exportieren**.</span><span class="sxs-lookup"><span data-stu-id="82aea-159">Right-click on a blank area of the schema designer window, and click **Schema file** ; **Export**.</span></span> <span data-ttu-id="82aea-160">Das Dialogfeld **Speichern** unter wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="82aea-160">The **Save As** dialog appears.</span></span>

2. <span data-ttu-id="82aea-161">Navigieren Sie zu demselben Verzeichnis, in dem Sie die MOF-Datei importiert haben.</span><span class="sxs-lookup"><span data-stu-id="82aea-161">Navigate to the same directory from where you imported the MOF file.</span></span> <span data-ttu-id="82aea-162">Benennen Sie die Datei mit der ursprünglichen MOF-Datei (standardmäßig "Schema. mof"), und klicken Sie auf **Speichern**.</span><span class="sxs-lookup"><span data-stu-id="82aea-162">Name the file the same as the original MOF file (Schema.mof by default), and click **Save**.</span></span> <span data-ttu-id="82aea-163">Vergewissern Sie sich, dass Sie die vorhandene Datei überschreiben möchten.</span><span class="sxs-lookup"><span data-stu-id="82aea-163">Confirm that you want to overwrite the existing file.</span></span>

   <span data-ttu-id="82aea-164">Obwohl Sie im Dialogfeld **Speichern** unter nicht explizit angegeben ist, werden dadurch sowohl die Schema. MOF-als auch die Schema. XML-Dateien ersetzt.</span><span class="sxs-lookup"><span data-stu-id="82aea-164">Although it is not explicitly stated in the **Save As** dialog, this replaces both the Schema.mof and Schema.xml files.</span></span>

## <a name="next-steps"></a><span data-ttu-id="82aea-165">Nächste Schritte</span><span class="sxs-lookup"><span data-stu-id="82aea-165">Next Steps</span></span>

<span data-ttu-id="82aea-166">Bevor Sie über den odata-Webdienst für die Verwaltung auf die neue VM-Ressource zugreifen, müssen Sie die Datei rbacconfiguration. xml aktualisieren, um den Zugriff auf das Hyper-V-Windows PowerShell-Modul zu ermöglichen, wie unter [Konfigurieren der rollenbasierten Autorisierung](./configuring-role-based-authorization.md)beschrieben. Außerdem müssen Sie den Webdienst neu starten.</span><span class="sxs-lookup"><span data-stu-id="82aea-166">Before you access the new VM resource from the Management OData web service, you must update the RbacConfiguration.xml file to allow access to the Hyper-V Windows PowerShell module as described in [Configuring Role-based Authorization](./configuring-role-based-authorization.md), and you will also need to restart the web service.</span></span>