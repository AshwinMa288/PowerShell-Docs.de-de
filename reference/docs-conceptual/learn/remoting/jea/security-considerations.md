---
ms.date: 07/10/2019
keywords: jea,powershell,security
title: JEA-Sicherheitsüberlegungen
description: Da JEA den Benutzern das Ausführen von Administratorbefehlen ohne vollständigen Administratorzugriff ermöglicht, können Sie diese Benutzer aus Sicherheitsgruppen mit weitreichenden Berechtigungen entfernen.
ms.openlocfilehash: f65f9d6c6620261de0a9c8de7812637565ca1806
ms.sourcegitcommit: 9080316e3ca4f11d83067b41351531672b667b7a
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/24/2020
ms.locfileid: "92501574"
---
# <a name="jea-security-considerations"></a><span data-ttu-id="d937f-104">JEA-Sicherheitsüberlegungen</span><span class="sxs-lookup"><span data-stu-id="d937f-104">JEA Security Considerations</span></span>

<span data-ttu-id="d937f-105">JEA unterstützt Sie bei der Verbesserung Ihres Sicherheitsniveaus und reduziert die Anzahl der permanenten Administratoren auf Ihren Computern.</span><span class="sxs-lookup"><span data-stu-id="d937f-105">JEA helps you improve your security posture by reducing the number of permanent administrators on your machines.</span></span> <span data-ttu-id="d937f-106">JEA erstellt mithilfe einer PowerShell-Sitzungskonfiguration einen neuen Einstiegspunkt für Benutzer zur Verwaltung des Systems.</span><span class="sxs-lookup"><span data-stu-id="d937f-106">JEA uses a PowerShell session configuration to create a new entry point for users to manage the system.</span></span> <span data-ttu-id="d937f-107">Benutzer, die für administrative Aufgaben einen erhöhten, aber nicht unbegrenzten Zugriff auf den Computer benötigen, können Zugriff auf den JEA-Endpunkt erhalten.</span><span class="sxs-lookup"><span data-stu-id="d937f-107">Users who need elevated, but not unlimited, access to the machine to do administrative tasks can be granted access to the JEA endpoint.</span></span> <span data-ttu-id="d937f-108">Da JEA den Benutzern das Ausführen von Administratorbefehlen ohne vollständigen Administratorzugriff ermöglicht, können Sie diese Benutzer aus Sicherheitsgruppen mit weitreichenden Berechtigungen entfernen.</span><span class="sxs-lookup"><span data-stu-id="d937f-108">Since JEA allows these users to run admin commands without having full admin access, you can then remove those users from highly privileged security groups.</span></span>

## <a name="run-as-account"></a><span data-ttu-id="d937f-109">Ausführendes Konto</span><span class="sxs-lookup"><span data-stu-id="d937f-109">Run-As account</span></span>

<span data-ttu-id="d937f-110">Jeder JEA-Endpunkt verfügt über ein designiertes **ausführendes Konto** .</span><span class="sxs-lookup"><span data-stu-id="d937f-110">Each JEA endpoint has a designated **run-as** account.</span></span> <span data-ttu-id="d937f-111">Dies ist das Konto, unter dem die Aktionen des Benutzers, der eine Verbindung herstellt, ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="d937f-111">This is the account under which the connecting user's actions are executed.</span></span> <span data-ttu-id="d937f-112">Dieses Konto lässt sich in der [Sitzungskonfigurationsdatei](session-configurations.md) konfigurieren und hat einen erheblichen Einfluss auf die Sicherheit Ihres Endpunkts.</span><span class="sxs-lookup"><span data-stu-id="d937f-112">This account is configurable in the [session configuration file](session-configurations.md), and the account you choose has a significant bearing on the security of your endpoint.</span></span>

<span data-ttu-id="d937f-113">Für das Konfigurieren eines **ausführenden Kontos** werden **virtuelle Konten** empfohlen.</span><span class="sxs-lookup"><span data-stu-id="d937f-113">**Virtual accounts** are the recommended way of configuring the **run-as** account.</span></span> <span data-ttu-id="d937f-114">Virtuelle Konten sind einmalige, temporäre lokale Konten, die während der Dauer der JEA-Sitzung für den Benutzer erstellt werden, der die Verbindung herstellt.</span><span class="sxs-lookup"><span data-stu-id="d937f-114">Virtual accounts are one-time, temporary local accounts that are created for the connecting user to use during the duration of their JEA session.</span></span> <span data-ttu-id="d937f-115">Unmittelbar nach Ende der Sitzung wird das virtuelle Konto gelöscht und kann nicht mehr verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="d937f-115">As soon as their session is terminated, the virtual account is destroyed and can't be used anymore.</span></span> <span data-ttu-id="d937f-116">Der Benutzer, der eine Verbindung herstellt, kennt die Anmeldeinformationen für das virtuelle Konto nicht.</span><span class="sxs-lookup"><span data-stu-id="d937f-116">The connecting user doesn't know the credentials for the virtual account.</span></span> <span data-ttu-id="d937f-117">Das virtuelle Konto kann nicht verwendet werden, um über andere Wege wie Remotedesktop oder einen uneingeschränkten PowerShell-Endpunkt auf das System zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="d937f-117">The virtual account can't be used to access the system via other means like Remote Desktop or an unconstrained PowerShell endpoint.</span></span>

<span data-ttu-id="d937f-118">Virtuelle Konten gehören standardmäßig zur lokalen Gruppe **Administratoren** auf dem Computer.</span><span class="sxs-lookup"><span data-stu-id="d937f-118">By default, virtual accounts belong to the local **Administrators** group on the machine.</span></span> <span data-ttu-id="d937f-119">Dadurch erhalten sie Vollzugriff zum Verwalten aller Elemente auf dem System, aber keine Rechte zum Verwalten von Ressourcen im Netzwerk.</span><span class="sxs-lookup"><span data-stu-id="d937f-119">This gives them full rights to manage anything on the system, but no rights to manage resources on the network.</span></span>
<span data-ttu-id="d937f-120">Für die Authentifizierung auf anderen Computern wird statt des virtuellen Kontos das lokale Computerkonto als Benutzerkontext verwendet.</span><span class="sxs-lookup"><span data-stu-id="d937f-120">When authenticating with other machines, the user context is that of the local computer account, not the virtual account.</span></span>

<span data-ttu-id="d937f-121">Domänencontroller sind ein Sonderfall, da sie nicht über eine lokale **Administratorgruppe** verfügen.</span><span class="sxs-lookup"><span data-stu-id="d937f-121">Domain controllers are a special case since there isn't a local **Administrators** group.</span></span> <span data-ttu-id="d937f-122">Stattdessen gehören virtuelle Konten zu **Domänen-Admins** und können die Verzeichnisdienste auf dem Domänencontroller verwalten.</span><span class="sxs-lookup"><span data-stu-id="d937f-122">Instead, virtual accounts belong to **Domain Admins** and can manage the directory services on the domain controller.</span></span> <span data-ttu-id="d937f-123">Die Domänenidentität ist weiterhin auf die Verwendung auf dem Domänencontroller eingeschränkt, auf dem die JEA-Sitzung instanziiert wurde.</span><span class="sxs-lookup"><span data-stu-id="d937f-123">The domain identity is still restricted for use on the domain controller where the JEA session was instantiated.</span></span> <span data-ttu-id="d937f-124">Jeder Netzwerkzugriff scheint dann aus dem Domänencontroller-Computerobjekt zu stammen.</span><span class="sxs-lookup"><span data-stu-id="d937f-124">Any network access appears to come from the domain controller computer object instead.</span></span>

<span data-ttu-id="d937f-125">In beiden Fällen können Sie auch explizit definieren, zu welchen Sicherheitsgruppen das virtuelle Konto gehört.</span><span class="sxs-lookup"><span data-stu-id="d937f-125">In both cases, you may explicitly define which security groups the virtual account belongs to.</span></span> <span data-ttu-id="d937f-126">Dies wird empfohlen, wenn eine Aufgabe ohne lokale Administrator- oder Domänenadministratorberechtigungen ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="d937f-126">This is a good practice when the task can be done without local or domain admin privileges.</span></span> <span data-ttu-id="d937f-127">Wenn Sie bereits eine Sicherheitsgruppe für Ihre Administratoren definiert haben, können Sie das virtuelle Konto zum Mitglied dieser Gruppe machen.</span><span class="sxs-lookup"><span data-stu-id="d937f-127">If you already have a security group defined for your admins, grant the virtual account membership to that group.</span></span> <span data-ttu-id="d937f-128">Die Gruppenmitgliedschaft virtueller Konten ist auf lokale Sicherheitsgruppen auf Arbeitsstationen und Mitgliedsservern beschränkt.</span><span class="sxs-lookup"><span data-stu-id="d937f-128">Virtual account group membership is limited to local security groups on workstation and member servers.</span></span> <span data-ttu-id="d937f-129">Auf Domänencontrollern müssen virtuelle Konten Mitglieder von Domänensicherheitsgruppen sein.</span><span class="sxs-lookup"><span data-stu-id="d937f-129">On domain controllers, virtual accounts must be members of domain security groups.</span></span>
<span data-ttu-id="d937f-130">Sobald das virtuelle Konto einer oder mehreren Sicherheitsgruppen hinzugefügt wurde, gehört es nicht mehr zu den Standardgruppen (lokale oder Domänenadministratoren).</span><span class="sxs-lookup"><span data-stu-id="d937f-130">Once the virtual account has been added to one or more security groups, it no longer belongs to the default groups (local or domain admins).</span></span>

<span data-ttu-id="d937f-131">In der folgenden Tabelle werden die möglichen Konfigurationsoptionen und die sich daraus ergebenden Berechtigungen für virtuelle Konten zusammengefasst:</span><span class="sxs-lookup"><span data-stu-id="d937f-131">The following table summarizes the possible configuration options and resulting permissions for virtual accounts:</span></span>

|        <span data-ttu-id="d937f-132">Computertyp</span><span class="sxs-lookup"><span data-stu-id="d937f-132">Computer type</span></span>         | <span data-ttu-id="d937f-133">Konfiguration virtueller Kontogruppen</span><span class="sxs-lookup"><span data-stu-id="d937f-133">Virtual account group configuration</span></span> |                   <span data-ttu-id="d937f-134">Lokaler Benutzerkontext</span><span class="sxs-lookup"><span data-stu-id="d937f-134">Local user context</span></span>                    | <span data-ttu-id="d937f-135">Netzwerkbenutzerkontext</span><span class="sxs-lookup"><span data-stu-id="d937f-135">Network user context</span></span> |
| ---------------------------- | ----------------------------------- | ------------------------------------------------------- | -------------------- |
| <span data-ttu-id="d937f-136">Domänencontroller</span><span class="sxs-lookup"><span data-stu-id="d937f-136">Domain controller</span></span>            | <span data-ttu-id="d937f-137">Standard</span><span class="sxs-lookup"><span data-stu-id="d937f-137">Default</span></span>                             | <span data-ttu-id="d937f-138">Domänenbenutzer, Mitglied von „ *DOMÄNE* \Domänen-Admins“</span><span class="sxs-lookup"><span data-stu-id="d937f-138">Domain user, member of ' *DOMAIN* \Domain Admins'</span></span>         | <span data-ttu-id="d937f-139">Computerkonto</span><span class="sxs-lookup"><span data-stu-id="d937f-139">Computer account</span></span>     |
| <span data-ttu-id="d937f-140">Domänencontroller</span><span class="sxs-lookup"><span data-stu-id="d937f-140">Domain controller</span></span>            | <span data-ttu-id="d937f-141">Domänengruppen A und B</span><span class="sxs-lookup"><span data-stu-id="d937f-141">Domain groups A and B</span></span>               | <span data-ttu-id="d937f-142">Domänenbenutzer, Mitglied von „ *DOMAIN* \A“, „ *DOMAIN* \B“</span><span class="sxs-lookup"><span data-stu-id="d937f-142">Domain user, member of ' *DOMAIN* \A', ' *DOMAIN* \B'</span></span>       | <span data-ttu-id="d937f-143">Computerkonto</span><span class="sxs-lookup"><span data-stu-id="d937f-143">Computer account</span></span>     |
| <span data-ttu-id="d937f-144">Mitgliedsserver oder Arbeitsstation</span><span class="sxs-lookup"><span data-stu-id="d937f-144">Member server or workstation</span></span> | <span data-ttu-id="d937f-145">Standard</span><span class="sxs-lookup"><span data-stu-id="d937f-145">Default</span></span>                             | <span data-ttu-id="d937f-146">Lokaler Benutzer, Mitglied von „ *BUILTIN* \Administrators“</span><span class="sxs-lookup"><span data-stu-id="d937f-146">Local user, member of ' *BUILTIN* \Administrators'</span></span>        | <span data-ttu-id="d937f-147">Computerkonto</span><span class="sxs-lookup"><span data-stu-id="d937f-147">Computer account</span></span>     |
| <span data-ttu-id="d937f-148">Mitgliedsserver oder Arbeitsstation</span><span class="sxs-lookup"><span data-stu-id="d937f-148">Member server or workstation</span></span> | <span data-ttu-id="d937f-149">Lokale Gruppen C und D</span><span class="sxs-lookup"><span data-stu-id="d937f-149">Local groups C and D</span></span>                | <span data-ttu-id="d937f-150">Lokale Gruppen, Mitglied von „ *COMPUTER* \C“ und „ *COMPUTER* \D“</span><span class="sxs-lookup"><span data-stu-id="d937f-150">Local user, member of ' *COMPUTER* \C' and ' *COMPUTER* \D'</span></span> | <span data-ttu-id="d937f-151">Computerkonto</span><span class="sxs-lookup"><span data-stu-id="d937f-151">Computer account</span></span>     |

<span data-ttu-id="d937f-152">Wenn Sie Sicherheitsüberwachungsereignisse und Anwendungsereignisprotokolle genauer betrachten, erkennen Sie, dass jede JEA-Benutzersitzung über ein eindeutiges virtuelles Konto verfügt.</span><span class="sxs-lookup"><span data-stu-id="d937f-152">When you look at security audit events and application event logs, you see that each JEA user session has a unique virtual account.</span></span> <span data-ttu-id="d937f-153">Dadurch können Sie die Benutzeraktionen in einem JEA-Endpunkt zum ursprünglichen Benutzer zurückverfolgen, der den Befehl ausgeführt hat.</span><span class="sxs-lookup"><span data-stu-id="d937f-153">This unique account helps you track user actions in a JEA endpoint back to the original user who ran the command.</span></span> <span data-ttu-id="d937f-154">Virtuelle Kontonamen haben folgendes Format: `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>`. Wenn beispielsweise der Benutzer **Alice** in der Domäne **Contoso** einen Dienst in einem JEA-Endpunkt neu startet, so lautet der Benutzername, der einem beliebigen Ereignis eines Dienststeuerungs-Managers zugeordnet ist, `WinRM Virtual Users\WinRM_VA_1_contoso_alice`.</span><span class="sxs-lookup"><span data-stu-id="d937f-154">Virtual account names follow the format `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` For example, if user **Alice** in domain **Contoso** restarts a service in a JEA endpoint, the username associated with any service control manager events would be `WinRM Virtual Users\WinRM_VA_1_contoso_alice`.</span></span>

<span data-ttu-id="d937f-155">**Gruppenverwaltete Dienstkonten (gMSAs)** erweisen sich als nützlich, wenn ein Mitgliedsserver in der JEA-Sitzung auf Netzwerkressourcen zugreifen muss.</span><span class="sxs-lookup"><span data-stu-id="d937f-155">**Group-managed service accounts (gMSAs)** are useful when a member server needs to have access to network resources in the JEA session.</span></span> <span data-ttu-id="d937f-156">Dies ist z. B der Fall, wenn ein JEA-Endpunkt zur Zugriffssteuerung für einen REST-API-Dienst genutzt wird, der auf einem anderen Computer gehostet wird.</span><span class="sxs-lookup"><span data-stu-id="d937f-156">For example, when a JEA endpoint is used to control access to a REST API service hosted on a different machine.</span></span> <span data-ttu-id="d937f-157">Sie können ganz einfach Funktionen zum Aufrufen der REST-APIs schreiben, Sie benötigen aber eine Netzwerkidentität für die Authentifizierung bei der API.</span><span class="sxs-lookup"><span data-stu-id="d937f-157">It's easy to write functions to invoke the REST APIs, but you need a network identity to authenticate with the API.</span></span> <span data-ttu-id="d937f-158">Die Verwendung eines gruppenverwalteten Dienstkontos ermöglicht den „zweiten Hop“, während Sie weiterhin die Kontrolle darüber behalten, welche Computer das Konto verwenden können.</span><span class="sxs-lookup"><span data-stu-id="d937f-158">Using a group-managed service account makes the second hop possible while maintaining control over which computers can use the account.</span></span> <span data-ttu-id="d937f-159">Die effektiven Berechtigungen des gMSA werden durch die Sicherheitsgruppen (lokal oder Domäne) definiert, zu denen das gMSA-Konto gehört.</span><span class="sxs-lookup"><span data-stu-id="d937f-159">The effective permissions of the gMSA are defined by the security groups (local or domain) to which the gMSA account belongs.</span></span>

<span data-ttu-id="d937f-160">Wenn ein JEA-Endpunkt für die Verwendung von gMSA konfiguriert ist, sieht es aus, als stammten die Aktionen aller JEA-Benutzer aus demselben gMSA.</span><span class="sxs-lookup"><span data-stu-id="d937f-160">When a JEA endpoint is configured to use a gMSA, the actions of all JEA users appear to come from the same gMSA.</span></span> <span data-ttu-id="d937f-161">Sie können die Aktionen eines bestimmten Benutzers nur dann zurückverfolgen, wenn Sie die ausgeführten Befehle identifizieren können, die in einer PowerShell-Sitzungsaufzeichnung erfasst sind.</span><span class="sxs-lookup"><span data-stu-id="d937f-161">The only way to trace actions back to a specific user is to identify the set of commands run in a PowerShell session transcript.</span></span>

<span data-ttu-id="d937f-162">**Pass-Through-Anmeldeinformationen** werden verwendet, wenn Sie kein **ausführendes Konto** angeben.</span><span class="sxs-lookup"><span data-stu-id="d937f-162">**Pass-thru credentials** are used when you don't specify a **run-as** account.</span></span> <span data-ttu-id="d937f-163">PowerShell verwendet dann die Anmeldeinformationen des Benutzers, der die Verbindung herstellt, um Befehle auf dem Remoteserver ausführen.</span><span class="sxs-lookup"><span data-stu-id="d937f-163">PowerShell uses the connecting user's credential to run commands on the remote server.</span></span> <span data-ttu-id="d937f-164">Dazu müssen Sie dem Benutzer, der die Verbindung herstellt, direkten Zugriff auf privilegierte Verwaltungsgruppen gewähren.</span><span class="sxs-lookup"><span data-stu-id="d937f-164">This requires you to grant the connecting user direct access to privileged management groups.</span></span> <span data-ttu-id="d937f-165">Diese Konfiguration wird für JEA **nicht** empfohlen.</span><span class="sxs-lookup"><span data-stu-id="d937f-165">This configuration is **not** recommended for JEA.</span></span> <span data-ttu-id="d937f-166">Benutzer, die eine Verbindung herstellen und über Administratorberechtigungen verfügen, können JEA umgehen und das System über andere, uneingeschränkte Möglichkeiten verwalten.</span><span class="sxs-lookup"><span data-stu-id="d937f-166">If the connecting user already has admin privileges, they can avoid JEA and manage the system via other, unconstrained means.</span></span> <span data-ttu-id="d937f-167">Weitere Informationen dazu, warum [JEA keinen Schutz von Administratoren bietet](#jea-doesnt-protect-against-admins), finden Sie im Abschnitt weiter unten.</span><span class="sxs-lookup"><span data-stu-id="d937f-167">For more information, see the section below on how [JEA doesn't protect against admins](#jea-doesnt-protect-against-admins).</span></span>

<span data-ttu-id="d937f-168">**Standard-Ausführungskonten** ermöglichen Ihnen, ein beliebiges Benutzerkonto anzugeben, unter dem die gesamte PowerShell-Sitzung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="d937f-168">**Standard run-as accounts** allow you to specify any user account under which the entire PowerShell session runs.</span></span> <span data-ttu-id="d937f-169">Sitzungskonfigurationen mit festgelegten **ausführenden Konten** (mit dem `-RunAsCredential`-Parameter) sind nicht mit JEA kompatibel.</span><span class="sxs-lookup"><span data-stu-id="d937f-169">Session configurations using fixed **run-as** accounts (with the `-RunAsCredential` parameter) aren't JEA-aware.</span></span> <span data-ttu-id="d937f-170">Rollendefinitionen funktionieren nicht mehr wie erwartet.</span><span class="sxs-lookup"><span data-stu-id="d937f-170">Role definitions no longer function as expected.</span></span> <span data-ttu-id="d937f-171">Jedem Benutzer, der zum Zugriff auf den Endpunkt berechtigt ist, wird die gleiche Rolle zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="d937f-171">Every user authorized to access the endpoint is assigned the same role.</span></span>

<span data-ttu-id="d937f-172">**RunAsCredential** sollte nicht auf einem JEA-Endpunkt verwendet werden, da Aktionen schwer zu bestimmten Benutzern zurückzuverfolgen sind und die Zuordnung von Benutzern zu Rollen nicht unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="d937f-172">You shouldn't use a **RunAsCredential** on a JEA endpoint because it's difficult to trace actions back to specific users and lacks support for mapping users to roles.</span></span>

## <a name="winrm-endpoint-acl"></a><span data-ttu-id="d937f-173">WinRM-Endpunkt-ACL</span><span class="sxs-lookup"><span data-stu-id="d937f-173">WinRM Endpoint ACL</span></span>

<span data-ttu-id="d937f-174">Wie reguläre PowerShell-Remoting-Endpunkte verfügt jeder JEA-Endpunkt über eine separate Zugriffssteuerungsliste (ACL), die festlegt, wer für eine Authentifizierung mit dem JEA-Endpunkt berechtigt ist.</span><span class="sxs-lookup"><span data-stu-id="d937f-174">As with regular PowerShell remoting endpoints, each JEA endpoint has a separate access control list (ACL) that controls who can authenticate with the JEA endpoint.</span></span> <span data-ttu-id="d937f-175">Bei einer nicht ordnungsgemäßen Konfiguration können vertrauenswürdige Benutzer möglicherweise nicht auf den JEA-Endpunkt zugreifen und nicht vertrauenswürdige Benutzer Zugriff erhalten.</span><span class="sxs-lookup"><span data-stu-id="d937f-175">If improperly configured, trusted users may not be able to access the JEA endpoint and untrusted users may have access.</span></span> <span data-ttu-id="d937f-176">Die WinRM-ACL wirkt sich nicht auf die Zuordnung von Benutzern zu JEA-Rollen aus.</span><span class="sxs-lookup"><span data-stu-id="d937f-176">The WinRM ACL doesn't affect the mapping of users to JEA roles.</span></span> <span data-ttu-id="d937f-177">Dies wird über das **RoleDefinitions** -Feld in der Sitzungskonfigurationsdatei gesteuert, mit der der Endpunkt registriert wurde.</span><span class="sxs-lookup"><span data-stu-id="d937f-177">Mapping is controlled by the **RoleDefinitions** field in the session configuration file used to register the endpoint.</span></span>

<span data-ttu-id="d937f-178">Wenn ein JEA-Endpunkt über mehrere Rollenfunktionen verfügt, wird die WinRM-ACL standardmäßig dafür konfiguriert, den Zugriff für alle zugeordneten Benutzer zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="d937f-178">By default, when a JEA endpoint has multiple role capabilities, the WinRM ACL is configured to allow access to all mapped users.</span></span> <span data-ttu-id="d937f-179">So bietet beispielsweise eine mit den folgenden Befehlen konfigurierte JEA-Sitzung vollen Zugriff auf `CONTOSO\JEA_Lev1` und `CONTOSO\JEA_Lev2`.</span><span class="sxs-lookup"><span data-stu-id="d937f-179">For example, a JEA session configured using the following commands grants full access to `CONTOSO\JEA_Lev1` and `CONTOSO\JEA_Lev2`.</span></span>

```powershell
$roles = @{ 'CONTOSO\JEA_Lev1' = 'Lev1Role'; 'CONTOSO\JEA_Lev2' = 'Lev2Role' }
New-PSSessionConfigurationFile -Path '.\jea.pssc' -SessionType RestrictedRemoteServer -RoleDefinitions $roles -RunAsVirtualAccount
Register-PSSessionConfiguration -Path '.\jea.pssc' -Name 'MyJEAEndpoint'
```

<span data-ttu-id="d937f-180">Sie können Benutzerberechtigungen über das [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration)-Cmdlet überwachen.</span><span class="sxs-lookup"><span data-stu-id="d937f-180">You can audit user permissions with the [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) cmdlet.</span></span>

```powershell
Get-PSSessionConfiguration -Name 'MyJEAEndpoint' | Select-Object Permission
```

```Output
Permission
----------
CONTOSO\JEA_Lev1 AccessAllowed
CONTOSO\JEA_Lev2 AccessAllowed
```

<span data-ttu-id="d937f-181">Sie können den Zugriff der einzelnen Benutzer ändern, indem Sie entweder `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` für eine interaktive Aufforderung oder `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` ausführen, um die Berechtigungen zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="d937f-181">To change which users have access, run either `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` for an interactive prompt or `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` to update the permissions.</span></span> <span data-ttu-id="d937f-182">Benutzer müssen mindestens Rechte zum *Aufrufen* haben, um auf den JEA-Endpunkt zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="d937f-182">Users need at least *Invoke* rights to access the JEA endpoint.</span></span>

<span data-ttu-id="d937f-183">Es ist möglich, einen JEA-Endpunkt zu erstellen, der nicht jedem Benutzer mit Zugriff eine definierte Rolle zuordnet.</span><span class="sxs-lookup"><span data-stu-id="d937f-183">It's possible to create a JEA endpoint that doesn't map a defined role to every user that has access.</span></span> <span data-ttu-id="d937f-184">Diese Benutzer können eine JEA-Sitzung starten, haben aber nur Zugriff auf die Standard-Cmdlets.</span><span class="sxs-lookup"><span data-stu-id="d937f-184">These users can start a JEA session, but only have access to the default cmdlets.</span></span> <span data-ttu-id="d937f-185">Sie können die Benutzerberechtigungen in einem JEA-Endpunkt überwachen, indem Sie `Get-PSSessionCapability` ausführen.</span><span class="sxs-lookup"><span data-stu-id="d937f-185">You can audit user permissions in a JEA endpoint by running `Get-PSSessionCapability`.</span></span> <span data-ttu-id="d937f-186">Weitere Informationen finden Sie unter [Überwachung und Berichterstellung zu JEA](audit-and-report.md).</span><span class="sxs-lookup"><span data-stu-id="d937f-186">For more information, see [Auditing and Reporting on JEA](audit-and-report.md).</span></span>

## <a name="least-privilege-roles"></a><span data-ttu-id="d937f-187">Rollen mit geringsten Rechten</span><span class="sxs-lookup"><span data-stu-id="d937f-187">Least privilege roles</span></span>

<span data-ttu-id="d937f-188">Wenn Sie JEA-Rollen entwickeln, sollten Sie beachten, dass im Hintergrund ausgeführte virtuelle und gruppenverwaltete Dienstkonten uneingeschränkten Zugriff auf den lokalen Computer haben können.</span><span class="sxs-lookup"><span data-stu-id="d937f-188">When designing JEA roles, it's important to remember that the virtual and group-managed service accounts running behind the scenes can have unrestricted access to the local machine.</span></span> <span data-ttu-id="d937f-189">Mit JEA-Rollenfunktionen können Sie einschränken, welche Befehle und Anwendungen in diesem privilegierten Kontext ausgeführt werden können.</span><span class="sxs-lookup"><span data-stu-id="d937f-189">JEA role capabilities help limit the commands and applications that can be run in that privileged context.</span></span>
<span data-ttu-id="d937f-190">Aufgrund nicht ordnungsgemäß entwickelter Rollen lassen sich gefährliche Befehle ausführen: Benutzer können die JEA-Grenzen überschreiten oder sich Zugriff auf vertrauliche Informationen verschaffen.</span><span class="sxs-lookup"><span data-stu-id="d937f-190">Improperly designed roles can allow dangerous commands that may permit a user to break out of the JEA boundaries or obtain access to sensitive information.</span></span>

<span data-ttu-id="d937f-191">Betrachten Sie beispielsweise den folgenden Rollenfunktionseintrag:</span><span class="sxs-lookup"><span data-stu-id="d937f-191">For example, consider the following role capability entry:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\*-Process'
}
```

<span data-ttu-id="d937f-192">Über diese Rollenfunktion können Benutzer jedes beliebige PowerShell-Cmdlet mit dem Namen **Process** aus dem **Microsoft.PowerShell.Management** -Modul ausführen.</span><span class="sxs-lookup"><span data-stu-id="d937f-192">This role capability allows users to run any PowerShell cmdlet with the noun **Process** from the **Microsoft.PowerShell.Management** module.</span></span> <span data-ttu-id="d937f-193">Benutzer benötigen möglicherweise Zugriff auf Cmdlets wie `Get-Process`, um zu erfahren, welche Anwendungen auf dem System ausgeführt werden, oder auf `Stop-Process`, um Anwendungen zu beenden, die nicht mehr reagieren.</span><span class="sxs-lookup"><span data-stu-id="d937f-193">Users may need to access cmdlets like `Get-Process` to see what applications are running on the system and `Stop-Process` to kill applications that aren't responding.</span></span> <span data-ttu-id="d937f-194">Der Eintrag ermöglicht aber auch den Befehl `Start-Process`, um ein beliebiges Programm mit vollständigen Administratorberechtigungen zu starten.</span><span class="sxs-lookup"><span data-stu-id="d937f-194">However, this entry also allows `Start-Process`, which can be used to start up an arbitrary program with full administrator permissions.</span></span> <span data-ttu-id="d937f-195">Das Programm muss nicht lokal im System installiert sein.</span><span class="sxs-lookup"><span data-stu-id="d937f-195">The program doesn't need to be installed locally on the system.</span></span> <span data-ttu-id="d937f-196">Ein verbundener Benutzer kann aus einer Dateifreigabe ein Programm starten, das ihm lokale Administratorrechte gewährt, Schadsoftware ausführt o. ä.</span><span class="sxs-lookup"><span data-stu-id="d937f-196">A connected user could start a program from a file share that gives the user local admin privileges, runs malware, and more.</span></span>

<span data-ttu-id="d937f-197">Eine sicherere Version der gleichen Rollenfunktion würde so aussehen:</span><span class="sxs-lookup"><span data-stu-id="d937f-197">A more secure version of this same role capability would look like:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\Get-Process', 'Microsoft.PowerShell.Management\Stop-Process'
}
```

<span data-ttu-id="d937f-198">Verwenden Sie möglichst keine Platzhalter in Rollenfunktionen.</span><span class="sxs-lookup"><span data-stu-id="d937f-198">Avoid using wildcards in role capabilities.</span></span> <span data-ttu-id="d937f-199">[Überprüfen Sie regelmäßig die geltenden Benutzerberechtigungen](audit-and-report.md#check-effective-rights-for-a-specific-user), um zu sehen, welche Befehle für einen Benutzer zugänglich sind.</span><span class="sxs-lookup"><span data-stu-id="d937f-199">Be sure to regularly [audit effective user permissions](audit-and-report.md#check-effective-rights-for-a-specific-user) to understand which commands are accessible to the user.</span></span>

## <a name="jea-doesnt-protect-against-admins"></a><span data-ttu-id="d937f-200">JEA bietet keinen Schutz vor Administratoren</span><span class="sxs-lookup"><span data-stu-id="d937f-200">JEA doesn't protect against admins</span></span>

<span data-ttu-id="d937f-201">Eines der wichtigsten Prinzipien von JEA ist, dass auch Nichtadministratoren gewisse Administratoraufgaben ausführen können.</span><span class="sxs-lookup"><span data-stu-id="d937f-201">One of the core principles of JEA is that it allows non-admins to do some admin tasks.</span></span> <span data-ttu-id="d937f-202">JEA bietet keinen Schutz vor Benutzern, die bereits über Administratorberechtigungen verfügen.</span><span class="sxs-lookup"><span data-stu-id="d937f-202">JEA doesn't protect against users who already have administrator privileges.</span></span> <span data-ttu-id="d937f-203">Benutzer, die zur Gruppe **Domänen-Admins** , zur lokalen Gruppe **Administratoren** oder anderen Gruppen mit vielen Berechtigungen gehören, können die JEA-Schutzmaßnahmen auf andere Weise umgehen.</span><span class="sxs-lookup"><span data-stu-id="d937f-203">Users who belong **Domain Admins** , local **Administrators** , or other highly privileged groups can circumvent JEA's protections via another means.</span></span> <span data-ttu-id="d937f-204">Sie könnten sich z. B. mit RDP anmelden, Remote-MMC-Konsolen verwenden oder eine Verbindung mit uneingeschränkten PowerShell-Endpunkten herstellen.</span><span class="sxs-lookup"><span data-stu-id="d937f-204">For example, they could sign in with RDP, use remote MMC consoles, or connect to unconstrained PowerShell endpoints.</span></span> <span data-ttu-id="d937f-205">Lokale Administratoren im System können JEA-Konfigurationen ändern und zusätzlichen Benutzern Berechtigungen gewähren oder Rollenfunktionen ändern, um den Spielraum von Benutzern in ihrer JEA-Sitzung zu erweitern.</span><span class="sxs-lookup"><span data-stu-id="d937f-205">Also, local admins on a system can modify JEA configurations to allow additional users or change a role capability to extend the scope of what a user can do in their JEA session.</span></span> <span data-ttu-id="d937f-206">Sie sollten daher die erweiterten Berechtigungen Ihrer JEA-Benutzer unbedingt überprüfen, um festzustellen, ob sie sich auf andere Art und Weise einen privilegierten Zugriff auf das System verschaffen könnten.</span><span class="sxs-lookup"><span data-stu-id="d937f-206">It's important to evaluate your JEA users' extended permissions to see if there are other ways to gain privileged access to the system.</span></span>

<span data-ttu-id="d937f-207">Üblicherweise wird JEA für regelmäßige tägliche Wartungsaufgaben verwendet. Benutzer können dank dieser privilegierten Just-in-Time-Zugriffsverwaltungslösung in Notfallsituationen vorübergehend zu lokalen Administratoren werden.</span><span class="sxs-lookup"><span data-stu-id="d937f-207">A common practice is to use JEA for regular day-to-day maintenance and have a just-in-time, privileged access management solution that allows users to temporarily become local admins in emergency situations.</span></span> <span data-ttu-id="d937f-208">Dadurch wird sichergestellt, dass Benutzer nicht zu permanenten Administratoren im System werden. Sie erhalten diese Berechtigung nur dann, wenn sie einen Workflow ausführen, der die Verwendung dieser Berechtigungen dokumentiert.</span><span class="sxs-lookup"><span data-stu-id="d937f-208">This helps ensure users aren't permanent admins on the system, but can get those rights if, and only when, they complete a workflow that documents their use of those permissions.</span></span>
