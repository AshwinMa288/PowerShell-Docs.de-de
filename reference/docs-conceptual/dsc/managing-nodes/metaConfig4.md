---
ms.date: 12/12/2018
keywords: DSC,PowerShell,Konfiguration,Setup,Einrichtung
title: Konfigurieren des LCM in PowerShell 4.0
description: Der lokale Konfigurationsmanager (Local Configuration Manager, LCM) läuft auf allen Zielknoten und ist für das Analysieren und Anwenden von Konfigurationen verantwortlich, die an den Knoten gesendet werden.
ms.openlocfilehash: cf4d8cffdb6492f9f8cdde4cbb82ba5843427cee
ms.sourcegitcommit: 488a940c7c828820b36a6ba56c119f64614afc29
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/27/2020
ms.locfileid: "92646969"
---
# <a name="configuring-the-lcm-in-powershell-40"></a><span data-ttu-id="05293-104">Konfigurieren des LCM in PowerShell 4.0</span><span class="sxs-lookup"><span data-stu-id="05293-104">Configuring the LCM in PowerShell 4.0</span></span>

><span data-ttu-id="05293-105">Gilt für: Windows PowerShell 4.0</span><span class="sxs-lookup"><span data-stu-id="05293-105">Applies To: Windows PowerShell 4.0</span></span>

<span data-ttu-id="05293-106">**Informationen, die sich auf Windows PowerShell 5.0 und höher beziehen, finden Sie unter [Konfigurieren des lokalen Konfigurations-Managers](metaConfig.md).**</span><span class="sxs-lookup"><span data-stu-id="05293-106">**For information related to Windows PowerShell 5.0 and later, see [Configuring the Local Configuration Manager](metaConfig.md).**</span></span>

<span data-ttu-id="05293-107">Der lokale Konfigurations-Manager (Local Configuration Manager, LCM) ist die Windows PowerShell DSC-Engine (Desired State Configuration, Konfiguration des gewünschten Zustands).</span><span class="sxs-lookup"><span data-stu-id="05293-107">Local Configuration Manager is the Windows PowerShell Desired State Configuration (DSC) engine.</span></span> <span data-ttu-id="05293-108">Dieses Modul wird auf allen Zielknoten ausgeführt und ist zuständig für das Aufrufen der Konfigurationsressourcen, die in einem DSC-Konfigurationsskript enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="05293-108">It runs on all target nodes, and it is responsible for calling the configuration resources that are included in a DSC configuration script.</span></span> <span data-ttu-id="05293-109">In diesem Thema werden die Eigenschaften des lokalen Konfigurations-Managers (LCM) aufgelistet, und Sie erfahren, wie Sie die LCM-Einstellungen auf einem Zielknoten ändern können.</span><span class="sxs-lookup"><span data-stu-id="05293-109">This topic lists the properties of Local Configuration Manager and describes how you can modify the Local Configuration Manager settings on a target node.</span></span>

## <a name="local-configuration-manager-properties"></a><span data-ttu-id="05293-110">Eigenschaften des lokalen Konfigurations-Managers</span><span class="sxs-lookup"><span data-stu-id="05293-110">Local Configuration Manager properties</span></span>

<span data-ttu-id="05293-111">Nachstehend sind die LCM-Eigenschaften aufgelistet, die Sie festlegen oder abrufen können.</span><span class="sxs-lookup"><span data-stu-id="05293-111">The following lists the Local Configuration Manager properties that you can set or retrieve.</span></span>

- <span data-ttu-id="05293-112">**AllowModuleOverwrite** : Steuert, ob neue vom Konfigurationsdienst heruntergeladene Konfigurationen die alten Konfigurationen auf dem Zielknoten überschreiben dürfen.</span><span class="sxs-lookup"><span data-stu-id="05293-112">**AllowModuleOverwrite** : Controls whether new configurations downloaded from the configuration service are allowed to overwrite the old ones on the target node.</span></span> <span data-ttu-id="05293-113">Mögliche Werte sind „True“ und „False“.</span><span class="sxs-lookup"><span data-stu-id="05293-113">Possible values are True and False.</span></span>
- <span data-ttu-id="05293-114">**CertificateID** : Der Fingerabdruck eines Zertifikats zur Sicherung von Anmeldeinformationen, die in einer Konfiguration weitergegeben werden.</span><span class="sxs-lookup"><span data-stu-id="05293-114">**CertificateID** : The thumbprint of a certificate used to secure credentials passed in a configuration.</span></span> <span data-ttu-id="05293-115">Weitere Informationen finden Sie unter [Möchten Sie Anmeldeinformationen in Windows PowerShell DSC schützen?](https://devblogs.microsoft.com/powershell/want-to-secure-credentials-in-windows-powershell-desired-state-configuration/).</span><span class="sxs-lookup"><span data-stu-id="05293-115">For more information see [Want to secure credentials in Windows PowerShell Desired State Configuration?](https://devblogs.microsoft.com/powershell/want-to-secure-credentials-in-windows-powershell-desired-state-configuration/).</span></span>
- <span data-ttu-id="05293-116">**ConfigurationID** : Eine GUID, die zum Abrufen einer bestimmten Konfigurationsdatei von einem Pulldienst dient.</span><span class="sxs-lookup"><span data-stu-id="05293-116">**ConfigurationID** : Indicates a GUID which is used to get a particular configuration file from a pull service.</span></span> <span data-ttu-id="05293-117">Die GUID stellt sicher, dass auf die richtige Konfigurationsdatei zugegriffen wird.</span><span class="sxs-lookup"><span data-stu-id="05293-117">The GUID ensures that the correct configuration file is accessed.</span></span>
- <span data-ttu-id="05293-118">**ConfigurationMode** : Gibt an, wie der lokale Konfigurations-Manager tatsächlich die Konfiguration auf die Zielknoten anwendet.</span><span class="sxs-lookup"><span data-stu-id="05293-118">**ConfigurationMode** : Specifies how the Local Configuration Manager actually applies the configuration to the target nodes.</span></span> <span data-ttu-id="05293-119">Die folgenden Werte sind möglich:</span><span class="sxs-lookup"><span data-stu-id="05293-119">It can take the following values:</span></span>
  - <span data-ttu-id="05293-120">**ApplyOnly** : Bei dieser Option wendet DSC die Konfiguration an und führt nur dann weitere Aktionen durch, wenn eine neue Konfiguration ermittelt wird – entweder indem Sie eine neue Konfiguration direkt an den Zielknoten senden oder indem Sie eine Verbindung mit einem Pulldienst herstellen und DSC bei der Abfrage des Pulldiensts eine neue Konfiguration ermittelt.</span><span class="sxs-lookup"><span data-stu-id="05293-120">**ApplyOnly** : With this option, DSC applies the configuration and does nothing further unless a new configuration is detected, either by you sending a new configuration directly to the target node or if you are connecting to a pull service and DSC discovers a new configuration when it checks with the pull service.</span></span> <span data-ttu-id="05293-121">Wenn die Konfiguration des Zielknotens abweicht, erfolgt keine Aktion.</span><span class="sxs-lookup"><span data-stu-id="05293-121">If the target node's configuration drifts, no action is taken.</span></span>
  - <span data-ttu-id="05293-122">**ApplyAndMonitor** : Bei dieser Standardoption wendet DSC neue Konfigurationen unabhängig davon an, ob diese von Ihnen direkt zum Zielknoten gesendet oder in einem Pulldienst ermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="05293-122">**ApplyAndMonitor** : With this option (which is the default), DSC applies any new configurations, whether sent by you directly to the target node or discovered on a pull service.</span></span>
    <span data-ttu-id="05293-123">Wenn sich im Anschluss die Konfiguration des Zielknotens von der Konfigurationsdatei unterscheidet, meldet DSC die Diskrepanz in Protokollen.</span><span class="sxs-lookup"><span data-stu-id="05293-123">Thereafter, if the configuration of the target node drifts from the configuration file, DSC reports the discrepancy in logs.</span></span> <span data-ttu-id="05293-124">Weitere Informationen zur DSC-Protokollierung finden Sie unter [Verwenden von Ereignisprotokollen zum Untersuchen von Fehlern in DSC](https://devblogs.microsoft.com/powershell/using-event-logs-to-diagnose-errors-in-desired-state-configuration/).</span><span class="sxs-lookup"><span data-stu-id="05293-124">For more about DSC logging, see [Using Event Logs to Diagnose Errors in Desired State Configuration](https://devblogs.microsoft.com/powershell/using-event-logs-to-diagnose-errors-in-desired-state-configuration/).</span></span>
  - <span data-ttu-id="05293-125">**ApplyAndAutoCorrect** : Bei dieser Option wendet DSC neue Konfigurationen unabhängig davon an, ob diese von Ihnen direkt zum Zielknoten gesendet oder in einem Pulldienst erkannt werden.</span><span class="sxs-lookup"><span data-stu-id="05293-125">**ApplyAndAutoCorrect** : With this option, DSC applies any new configurations, whether sent by you directly to the target node or discovered on a pull service.</span></span> <span data-ttu-id="05293-126">Wenn sich im Anschluss die Konfiguration des Zielknotens von der Konfigurationsdatei unterscheidet, meldet DSC die Diskrepanz in Protokollen. Anschließend wird versucht, die Zielknotenkonfiguration in Übereinstimmung mit der Konfigurationsdatei zu bringen.</span><span class="sxs-lookup"><span data-stu-id="05293-126">Thereafter, if the configuration of the target node drifts from the configuration file, DSC reports the discrepancy in logs, and then attempts to adjust the target node configuration to bring in compliance with the configuration file.</span></span>
- <span data-ttu-id="05293-127">**ConfigurationModeFrequencyMins** : Stellt die Häufigkeit (in Minuten) dar, mit der die Hintergrundanwendung von DSC versucht, die aktuelle Konfiguration auf dem Zielknoten zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="05293-127">**ConfigurationModeFrequencyMins** : Represents the frequency (in minutes) at which the background application of DSC attempts to implement the current configuration on the target node.</span></span> <span data-ttu-id="05293-128">Der Standardwert ist 15.</span><span class="sxs-lookup"><span data-stu-id="05293-128">The default value is 15.</span></span> <span data-ttu-id="05293-129">Dieser Wert kann in Verbindung mit „RefreshMode“ festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="05293-129">This value can be set in conjunction with RefreshMode.</span></span> <span data-ttu-id="05293-130">Wenn „RefreshMode“ auf PULL festgelegt ist, kontaktiert der Zielknoten den Konfigurationsdienst in einem von „RefreshFrequencyMins“ festgelegten Intervall und lädt die aktuelle Konfiguration herunter.</span><span class="sxs-lookup"><span data-stu-id="05293-130">When RefreshMode is set to PULL, the target node contacts the configuration service at an interval set by RefreshFrequencyMins and downloads the current configuration.</span></span> <span data-ttu-id="05293-131">Unabhängig vom Wert von „RefreshMode“ wendet die Konsistenz-Engine im von „ConfigurationModeFrequencyMins“ festgelegten Intervall die neueste Konfiguration an, die auf den Zielknoten heruntergeladen wurde.</span><span class="sxs-lookup"><span data-stu-id="05293-131">Regardless of the RefreshMode value, at the interval set by ConfigurationModeFrequencyMins, the consistency engine applies the latest configuration that was downloaded to the target node.</span></span> <span data-ttu-id="05293-132">„RefreshFrequencyMins“ muss auf ein Vielfaches in Form einer ganzen Zahl von „ConfigurationModeFrequencyMins“ festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="05293-132">RefreshFrequencyMins should be set to an integer multiple of ConfigurationModeFrequencyMins.</span></span>
- <span data-ttu-id="05293-133">**Credential** : Gibt (z.B. mit „Get-Credential“) erforderliche Anmeldeinformationen für den Zugriff auf Remoteressourcen an, um z.B. den Konfigurationsdienst zu kontaktieren.</span><span class="sxs-lookup"><span data-stu-id="05293-133">**Credential** : Indicates credentials (as with Get-Credential) required to access remote resources, such as to contact the configuration service.</span></span>
- <span data-ttu-id="05293-134">**DownloadManagerCustomData** : Stellt ein Array mit benutzerdefinierten Daten dar, die spezifisch für den Download-Manager sind.</span><span class="sxs-lookup"><span data-stu-id="05293-134">**DownloadManagerCustomData** : Represents an array that contains custom data specific to the download manager.</span></span>
- <span data-ttu-id="05293-135">**DownloadManagerName** : Gibt den Namen der Konfiguration und des Moduls des Download-Managers an.</span><span class="sxs-lookup"><span data-stu-id="05293-135">**DownloadManagerName** : Indicates the name of the configuration and module download manager.</span></span>
- <span data-ttu-id="05293-136">**RebootNodeIfNeeded:** Legen Sie für diese Option `$true` fest, um Ressourcen das Neustarten des Knotens mithilfe des `$global:DSCMachineStatus`-Flags zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="05293-136">**RebootNodeIfNeeded** : Set this to `$true` to allow resources to reboot the Node using the `$global:DSCMachineStatus` flag.</span></span> <span data-ttu-id="05293-137">Andernfalls müssen Sie den Knoten für jede Konfiguration manuell neu starten, die dies erfordert.</span><span class="sxs-lookup"><span data-stu-id="05293-137">Otherwise, you will have to manually reboot the node for any configuration that requires it.</span></span> <span data-ttu-id="05293-138">Standardwert: `$false`.</span><span class="sxs-lookup"><span data-stu-id="05293-138">The default value is `$false`.</span></span> <span data-ttu-id="05293-139">Um diese Einstellung zu verwenden, wenn eine Neustartbedingung von einer anderen Komponente als von DSC in Kraft gesetzt wird (z.B. Windows Installer), kombinieren Sie diese Einstellung mit dem Modul [xPendingReboot](https://github.com/powershell/xpendingreboot).</span><span class="sxs-lookup"><span data-stu-id="05293-139">To use this setting when a reboot condition is enacted by something other than DSC (such as Windows Installer), combine this setting with the [xPendingReboot](https://github.com/powershell/xpendingreboot) module.</span></span>
- <span data-ttu-id="05293-140">**RefreshFrequencyMins** : Wird verwendet, wenn Sie einen Pulldienst eingerichtet haben.</span><span class="sxs-lookup"><span data-stu-id="05293-140">**RefreshFrequencyMins** : Used when you have set up a pull service.</span></span> <span data-ttu-id="05293-141">Stellt die Häufigkeit (in Minuten) dar, mit der der lokale Konfigurations-Manager einen Pulldienst kontaktiert, um die aktuelle Konfiguration herunterzuladen.</span><span class="sxs-lookup"><span data-stu-id="05293-141">Represents the frequency (in minutes) at which the Local Configuration Manager contacts a pull service to download the current configuration.</span></span> <span data-ttu-id="05293-142">Dieser Wert kann in Verbindung mit „ConfigurationModeFrequencyMins“ festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="05293-142">This value can be set in conjunction with ConfigurationModeFrequencyMins.</span></span> <span data-ttu-id="05293-143">Wenn „RefreshMode“ auf PULL festgelegt ist, kontaktiert der Zielknoten den Pulldienst in einem von „RefreshFrequencyMins“ festgelegten Intervall und lädt die aktuelle Konfiguration herunter.</span><span class="sxs-lookup"><span data-stu-id="05293-143">When RefreshMode is set to PULL, the target node contacts the pull service at an interval set by RefreshFrequencyMins and downloads the current configuration.</span></span> <span data-ttu-id="05293-144">Die Konsistenz-Engine wendet im von „ConfigurationModeFrequencyMins“ festgelegten Intervall die neueste Konfiguration an, die auf den Zielknoten heruntergeladen wurde.</span><span class="sxs-lookup"><span data-stu-id="05293-144">At the interval set by ConfigurationModeFrequencyMins, the consistency engine then applies the latest configuration that was downloaded to the target node.</span></span> <span data-ttu-id="05293-145">Wenn „RefreshFrequencyMins“ nicht in Form einer ganzen Zahl auf ein Vielfaches von „ConfigurationModeFrequencyMins“ festgelegt wurde, rundet das System den Wert auf.</span><span class="sxs-lookup"><span data-stu-id="05293-145">If RefreshFrequencyMins is not set to an integer multiple of ConfigurationModeFrequencyMins, the system will round it up.</span></span> <span data-ttu-id="05293-146">Der Standardwert ist 30.</span><span class="sxs-lookup"><span data-stu-id="05293-146">The default value is 30.</span></span>
- <span data-ttu-id="05293-147">**RefreshMode** : Mögliche Werte sind **Push** (Standard) und **Pull**.</span><span class="sxs-lookup"><span data-stu-id="05293-147">**RefreshMode** : Possible values are **Push** (the default) and **Pull**.</span></span> <span data-ttu-id="05293-148">Bei der Pushkonfiguration müssen Sie mithilfe eines beliebigen Clientcomputers eine Konfigurationsdatei auf jedem Zielknoten ablegen.</span><span class="sxs-lookup"><span data-stu-id="05293-148">In the "push" configuration, you must place a configuration file on each target node, using any client computer.</span></span>
  <span data-ttu-id="05293-149">Im Pullmodus müssen Sie einen Pulldienst für den lokalen Konfigurations-Manager einrichten, der für den Zugriff auf die Konfigurationsdateien kontaktiert werden muss.</span><span class="sxs-lookup"><span data-stu-id="05293-149">In the "pull" mode, you must set up a pull service for Local Configuration Manager to contact and access the configuration files.</span></span>

> [!NOTE]
> <span data-ttu-id="05293-150">Der LCM startet den **ConfigurationModeFrequencyMins** -Zyklus auf Grundlage folgender Ereignisse:</span><span class="sxs-lookup"><span data-stu-id="05293-150">The LCM starts the **ConfigurationModeFrequencyMins** cycle based on:</span></span>
>
> - <span data-ttu-id="05293-151">Mithilfe von `Set-DscLocalConfigurationManager` wird eine neue Metakonfiguration angewendet</span><span class="sxs-lookup"><span data-stu-id="05293-151">A new metaconfig is applied using `Set-DscLocalConfigurationManager`</span></span>
> - <span data-ttu-id="05293-152">Der Computer wird neu gestartet</span><span class="sxs-lookup"><span data-stu-id="05293-152">A machine restart</span></span>
>
> <span data-ttu-id="05293-153">Bei Bedingungen, unter denen es beim Timerprozess zu einem Absturz kommt, der innerhalb von 30 Sekunden erkannt wird, wird der Zyklus neu gestartet.</span><span class="sxs-lookup"><span data-stu-id="05293-153">For any condition where the timer process experiences a crash, that will be detected within 30 seconds and the cycle will be restarted.</span></span> <span data-ttu-id="05293-154">Ein gleichzeitiger Vorgang könnte den Start des Zyklus verzögern; wenn die Dauer dieses Vorgangs länger ist als die konfigurierte Zyklushäufigkeit, startet der nächste Timer nicht.</span><span class="sxs-lookup"><span data-stu-id="05293-154">A concurrent operation could delay the cycle from being started, if the duration of this operation exceeds the configured cycle frequency, the next timer will not start.</span></span>
>
> <span data-ttu-id="05293-155">Beispiel: Die Metakonfiguration ist auf eine Pullhäufigkeit von 15 Minuten konfiguriert, und ein Pull wird zum Zeitpunkt t1 ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="05293-155">Example, the metaconfig is configured at a 15 minute pull frequency and a pull occurs at T1.</span></span> <span data-ttu-id="05293-156">Der Knoten kann seine Aufgaben 16 Minuten lang nicht beenden.</span><span class="sxs-lookup"><span data-stu-id="05293-156">The Node does not finish work for 16 minutes.</span></span> <span data-ttu-id="05293-157">Der erste 15-Minuten-Zyklus wird ignoriert, und der nächste Pull wird zum Zeitpunkt t1+15+15 ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="05293-157">The first 15 minute cycle is ignored, and next pull will happen at T1+15+15.</span></span>

### <a name="example-of-updating-local-configuration-manager-settings"></a><span data-ttu-id="05293-158">Beispiel der Aktualisierung der Einstellungen des lokalen Konfigurations-Managers</span><span class="sxs-lookup"><span data-stu-id="05293-158">Example of updating Local Configuration Manager settings</span></span>

<span data-ttu-id="05293-159">Sie können die Einstellungen des lokalen Konfigurations-Managers auf einem Zielknoten aktualisieren, indem Sie einen **LocalConfigurationManager** -Block dem „node“-Block in einem Konfigurationsskript hinzufügen (siehe das folgende Beispiel).</span><span class="sxs-lookup"><span data-stu-id="05293-159">You can update the Local Configuration Manager settings of a target node by including a **LocalConfigurationManager** block inside the node block in a configuration script, as shown in the following example.</span></span>

```powershell
Configuration ExampleConfig
{
    Node "Server001"
    {
        LocalConfigurationManager
        {
            ConfigurationID = "646e48cb-3082-4a12-9fd9-f71b9a562d4e"
            ConfigurationModeFrequencyMins = 45
            ConfigurationMode = "ApplyAndAutocorrect"
            RefreshMode = "Pull"
            RefreshFrequencyMins = 90
            DownloadManagerName = "WebDownloadManager"
            DownloadManagerCustomData = (@{ServerUrl="https://$PullService/psdscpullserver.svc"})
            CertificateID = "71AA68562316FE3F73536F1096B85D66289ED60E"
            Credential = $cred
            RebootNodeIfNeeded = $true
            AllowModuleOverwrite = $false
        }
# One or more resource blocks can be added here
    }
}

# The following line invokes the configuration and creates a file called
# Server001.meta.mof at the specified path
ExampleConfig -OutputPath "c:\users\public\dsc"
```

<span data-ttu-id="05293-160">Bei Ausführen des Skripts im vorherigen Beispiel wird eine MOF-Datei generiert, die die gewünschten Einstellungen angibt und speichert.</span><span class="sxs-lookup"><span data-stu-id="05293-160">Running the script in the previous example generates a MOF file that specifies and stores the desired settings.</span></span> <span data-ttu-id="05293-161">Um die Einstellungen zu übernehmen, können Sie das Cmdlet **Set DscLocalConfigurationManager** verwenden (siehe das folgende Beispiel).</span><span class="sxs-lookup"><span data-stu-id="05293-161">To apply the settings, you can use the **Set-DscLocalConfigurationManager** cmdlet, as shown in the following example.</span></span>

```powershell
Set-DscLocalConfigurationManager -Path "c:\users\public\dsc"
```

> [!NOTE]
> <span data-ttu-id="05293-162">Für den **Path** -Parameter müssen Sie denselben Pfad angeben, den Sie für den **OutputPath** -Parameter angegeben haben, als Sie die Konfiguration im vorherigen Beispiel aufgerufen haben.</span><span class="sxs-lookup"><span data-stu-id="05293-162">For the **Path** parameter, you must specify the same path that you specified for the **OutputPath** parameter when you invoked the configuration in the previous example.</span></span>

<span data-ttu-id="05293-163">Mit dem Cmdlet **Get-DscLocalConfigurationManager** können Sie die aktuellen Einstellungen des lokalen Konfigurations-Managers anzeigen.</span><span class="sxs-lookup"><span data-stu-id="05293-163">To see the current Local Configuration Manager settings, you can use the **Get-DscLocalConfigurationManager** cmdlet.</span></span> <span data-ttu-id="05293-164">Wenn Sie dieses Cmdlet ohne Parameter aufrufen, werden standardmäßig die Einstellungen des lokalen Konfigurations-Manager für den Knoten abgerufen, auf dem er ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="05293-164">If you invoke this cmdlet with no parameters, by default it will get the Local Configuration Manager settings for the node on which you run it.</span></span> <span data-ttu-id="05293-165">Um einen anderen Knoten anzugeben, verwenden Sie mit diesem Cmdlet den **CimSession** -Parameter.</span><span class="sxs-lookup"><span data-stu-id="05293-165">To specify another node, use the **CimSession** parameter with this cmdlet.</span></span>
