---
ms.date: 06/12/2017
keywords: dsc,powershell,configuration,setup
title: DSC-Ressource „File“
ms.openlocfilehash: b5bc2c305b8cfccbd044274811df631264a24279
ms.sourcegitcommit: e7445ba8203da304286c591ff513900ad1c244a4
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 04/23/2019
ms.locfileid: "62077329"
---
# <a name="dsc-file-resource"></a><span data-ttu-id="ca3d7-103">DSC-Ressource „File“</span><span class="sxs-lookup"><span data-stu-id="ca3d7-103">DSC File Resource</span></span>

> <span data-ttu-id="ca3d7-104">Gilt für: Windows PowerShell 4.0, Windows PowerShell 5.0</span><span class="sxs-lookup"><span data-stu-id="ca3d7-104">Applies To: Windows PowerShell 4.0, Windows PowerShell 5.0</span></span>

<span data-ttu-id="ca3d7-105">Die Ressource „File“ in Windows PowerShell DSC bietet einen Mechanismus zum Verwalten von Dateien und Verzeichnissen auf einem Zielknoten.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-105">The File resource in Windows PowerShell Desired State Configuration (DSC) provides a mechanism to manage files and folders on the target node.</span></span> <span data-ttu-id="ca3d7-106">Der Zielknoten muss auf **DestinationPath** und **SourcePath** zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-106">The **DestinationPath** and **SourcePath** must both be accessible by the target Node.</span></span>

## <a name="syntax"></a><span data-ttu-id="ca3d7-107">Syntax</span><span class="sxs-lookup"><span data-stu-id="ca3d7-107">Syntax</span></span>

```
File [string] #ResourceName
{
    DestinationPath = [string]
    [ Attributes = [string[]] { Archive | Hidden | ReadOnly | System }]
    [ Checksum = [string] { CreatedDate | ModifiedDate | SHA-1 | SHA-256 | SHA-512 } ]
    [ Contents = [string] ]
    [ Credential = [PSCredential] ]
    [ Ensure = [string] { Absent | Present } ]
    [ Force = [bool] ]
    [ Recurse = [bool] ]
    [ DependsOn = [string[]] ]
    [ SourcePath = [string] ]
    [ Type = [string] { Directory | File } ]
    [ MatchSource = [bool] ]
}
```

## <a name="properties"></a><span data-ttu-id="ca3d7-108">Eigenschaften</span><span class="sxs-lookup"><span data-stu-id="ca3d7-108">Properties</span></span>

|<span data-ttu-id="ca3d7-109">Eigenschaft</span><span class="sxs-lookup"><span data-stu-id="ca3d7-109">Property</span></span>       |<span data-ttu-id="ca3d7-110">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="ca3d7-110">Description</span></span>                                                                   |<span data-ttu-id="ca3d7-111">Erforderlich</span><span class="sxs-lookup"><span data-stu-id="ca3d7-111">Required</span></span>|<span data-ttu-id="ca3d7-112">Standardwert</span><span class="sxs-lookup"><span data-stu-id="ca3d7-112">Default</span></span>|
|---------------|------------------------------------------------------------------------------|--------|-------|
|<span data-ttu-id="ca3d7-113">DestinationPath</span><span class="sxs-lookup"><span data-stu-id="ca3d7-113">DestinationPath</span></span>|<span data-ttu-id="ca3d7-114">Der Speicherort auf dem Zielknoten, den Sie sicherstellen möchten, ist `Present` oder `Absent`.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-114">The location, on the target node, you want to ensure is `Present` or `Absent`.</span></span>|<span data-ttu-id="ca3d7-115">Ja</span><span class="sxs-lookup"><span data-stu-id="ca3d7-115">Yes</span></span>|<span data-ttu-id="ca3d7-116">Nein</span><span class="sxs-lookup"><span data-stu-id="ca3d7-116">No</span></span>|
|<span data-ttu-id="ca3d7-117">Attributes</span><span class="sxs-lookup"><span data-stu-id="ca3d7-117">Attributes</span></span>     |<span data-ttu-id="ca3d7-118">Der gewünschte Status der Attribute der Zieldatei oder des Zielverzeichnisses.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-118">The desired state of the attributes for the targeted file or directory.</span></span> <span data-ttu-id="ca3d7-119">Gültige Werte sind **Archive**, **Hidden**, **ReadOnly** und **System**.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-119">Valid values are **Archive**, **Hidden**, **ReadOnly**, and **System**.</span></span>|<span data-ttu-id="ca3d7-120">Nein</span><span class="sxs-lookup"><span data-stu-id="ca3d7-120">No</span></span>|<span data-ttu-id="ca3d7-121">Keine</span><span class="sxs-lookup"><span data-stu-id="ca3d7-121">None</span></span>|
|<span data-ttu-id="ca3d7-122">Checksum</span><span class="sxs-lookup"><span data-stu-id="ca3d7-122">Checksum</span></span>      |<span data-ttu-id="ca3d7-123">Der zu verwendende Prüfsummentyp, wenn bestimmt wird, ob zwei Dateien identisch sind.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-123">The checksum type to use when determining whether two files are the same.</span></span> <span data-ttu-id="ca3d7-124">Gültige Werte: SHA-1, SHA-256, SHA-512, createdDate, modifiedDate.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-124">Valid values include: SHA-1, SHA-256, SHA-512, createdDate, modifiedDate.</span></span>|<span data-ttu-id="ca3d7-125">Nein</span><span class="sxs-lookup"><span data-stu-id="ca3d7-125">No</span></span>|<span data-ttu-id="ca3d7-126">Nur der Datei- oder Verzeichnisname wird verglichen.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-126">Only the file or directory name is compared.</span></span>|
|<span data-ttu-id="ca3d7-127">Contents</span><span class="sxs-lookup"><span data-stu-id="ca3d7-127">Contents</span></span>       |<span data-ttu-id="ca3d7-128">Nur bei der Verwendung mit `File`-Typ gültig.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-128">Only valid when used with `File` type.</span></span> <span data-ttu-id="ca3d7-129">Gibt den Inhalt an, von dem sichergestellt werden soll (Ensure), ob er in der Zieldatei vorhanden (`Present`) oder nicht vorhanden (`Absent`) ist.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-129">Indicates the contents to Ensure are `Present` or `Absent` from the targeted file.</span></span> |<span data-ttu-id="ca3d7-130">Nein</span><span class="sxs-lookup"><span data-stu-id="ca3d7-130">No</span></span>|<span data-ttu-id="ca3d7-131">Keine</span><span class="sxs-lookup"><span data-stu-id="ca3d7-131">None</span></span>|
|<span data-ttu-id="ca3d7-132">Credential</span><span class="sxs-lookup"><span data-stu-id="ca3d7-132">Credential</span></span>     |<span data-ttu-id="ca3d7-133">Die Anmeldeinformationen, die für den Zugriff auf Ressourcen wie z.B. Quelldateien erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-133">The credentials that are required to access resources, such as source files.</span></span>|<span data-ttu-id="ca3d7-134">Nein</span><span class="sxs-lookup"><span data-stu-id="ca3d7-134">No</span></span>|<span data-ttu-id="ca3d7-135">Das Computerkonto des Zielknotens.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-135">The target node's Computer Account.</span></span> <span data-ttu-id="ca3d7-136">(*Siehe Hinweis*)</span><span class="sxs-lookup"><span data-stu-id="ca3d7-136">(*see note*)</span></span>|
|<span data-ttu-id="ca3d7-137">Ensure</span><span class="sxs-lookup"><span data-stu-id="ca3d7-137">Ensure</span></span>         |<span data-ttu-id="ca3d7-138">Der gewünschte Zustand von Zieldatei oder -verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-138">The desired state of the target file or directory.</span></span> |<span data-ttu-id="ca3d7-139">Nein</span><span class="sxs-lookup"><span data-stu-id="ca3d7-139">No</span></span>|<span data-ttu-id="ca3d7-140">**Vorhanden**</span><span class="sxs-lookup"><span data-stu-id="ca3d7-140">**Present**</span></span>|
|<span data-ttu-id="ca3d7-141">Force</span><span class="sxs-lookup"><span data-stu-id="ca3d7-141">Force</span></span>          |<span data-ttu-id="ca3d7-142">Setzt bestimmte Zugriffsoperationen außer Kraft, die zu einem Fehler führen würden (z.B. das Überschreiben einer Datei oder Löschen eines Verzeichnisses, das nicht leer ist).</span><span class="sxs-lookup"><span data-stu-id="ca3d7-142">Overrides access operations that would result in an error (such as overwriting a file or deleting a directory that is not empty).</span></span>|<span data-ttu-id="ca3d7-143">Nein</span><span class="sxs-lookup"><span data-stu-id="ca3d7-143">No</span></span>|`$false`|
|<span data-ttu-id="ca3d7-144">Recurse</span><span class="sxs-lookup"><span data-stu-id="ca3d7-144">Recurse</span></span>        |<span data-ttu-id="ca3d7-145">Nur bei der Verwendung mit `Directory`-Typ gültig.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-145">Only valid when used with `Directory` type.</span></span> <span data-ttu-id="ca3d7-146">Führt den Statusvorgang rekursiv für alle Unterverzeichnisse aus.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-146">Performs the state operation recursively to all subdirectories.</span></span>|<span data-ttu-id="ca3d7-147">Nein</span><span class="sxs-lookup"><span data-stu-id="ca3d7-147">No</span></span>|`$false`|
|<span data-ttu-id="ca3d7-148">DependsOn</span><span class="sxs-lookup"><span data-stu-id="ca3d7-148">DependsOn</span></span>      |<span data-ttu-id="ca3d7-149">Legt auf angegebenen Ressourcen eine Abhängigkeit fest.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-149">Sets a dependency on specified resource(s).</span></span> <span data-ttu-id="ca3d7-150">Diese Ressource wird nur nach erfolgreicher Ausführung aller abhängigen Ressourcen ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-150">This resource will only execute after successful execution of any dependent resources.</span></span> <span data-ttu-id="ca3d7-151">Sie können abhängige Ressourcen mit der Syntax `"[ResourceType]ResourceName"` angeben.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-151">You can specify dependent resources using the syntax `"[ResourceType]ResourceName"`.</span></span> <span data-ttu-id="ca3d7-152">Weitere Informationen finden Sie unter [about_DependsOn](../../../configurations/resource-depends-on.md).</span><span class="sxs-lookup"><span data-stu-id="ca3d7-152">See [about_DependsOn](../../../configurations/resource-depends-on.md)</span></span>|<span data-ttu-id="ca3d7-153">Nein</span><span class="sxs-lookup"><span data-stu-id="ca3d7-153">No</span></span>|<span data-ttu-id="ca3d7-154">Keine</span><span class="sxs-lookup"><span data-stu-id="ca3d7-154">None</span></span>|
|<span data-ttu-id="ca3d7-155">SourcePath</span><span class="sxs-lookup"><span data-stu-id="ca3d7-155">SourcePath</span></span>     |<span data-ttu-id="ca3d7-156">Der Pfad, aus dem die Datei- oder Ordnerressource kopiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-156">The path from which to copy the file or folder resource.</span></span>|<span data-ttu-id="ca3d7-157">Nein</span><span class="sxs-lookup"><span data-stu-id="ca3d7-157">No</span></span>|<span data-ttu-id="ca3d7-158">Keine</span><span class="sxs-lookup"><span data-stu-id="ca3d7-158">None</span></span>|
|<span data-ttu-id="ca3d7-159">Type</span><span class="sxs-lookup"><span data-stu-id="ca3d7-159">Type</span></span>           |<span data-ttu-id="ca3d7-160">Der Typ der zu konfigurierenden Ressource.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-160">The type of resource being configured.</span></span> <span data-ttu-id="ca3d7-161">Gültige Werte sind `Directory` und `File`.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-161">Valid values are `Directory` and `File`.</span></span>|<span data-ttu-id="ca3d7-162">Nein</span><span class="sxs-lookup"><span data-stu-id="ca3d7-162">No</span></span>|`File`|
|<span data-ttu-id="ca3d7-163">MatchSource</span><span class="sxs-lookup"><span data-stu-id="ca3d7-163">MatchSource</span></span>    |<span data-ttu-id="ca3d7-164">Bestimmt, ob die Ressource überwachen sollte, ob dem Quellverzeichnis nach der ersten Kopie neue Dateien hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-164">Determines if the resource should monitor for new files added to the source directory after the initial copy.</span></span> <span data-ttu-id="ca3d7-165">Der Wert `$true` gibt an, dass nach Erstellen der ersten Kopie alle neuen Quelldateien in das Ziel kopiert werden sollten.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-165">A value of `$true` indicates that, after the initial copy, any new source files should be copied to the destination.</span></span> <span data-ttu-id="ca3d7-166">Bei Festlegung auf `$False` speichert die Ressource den Inhalt des Quellverzeichnisses zwischen und ignoriert alle Dateien, die nach der ersten Kopie hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-166">If set to `$False`, the resource caches the contents of the source directory and ignores any files added after the initial copy.</span></span>|<span data-ttu-id="ca3d7-167">Nein</span><span class="sxs-lookup"><span data-stu-id="ca3d7-167">No</span></span>|`$false`|

> [!WARNING]
> <span data-ttu-id="ca3d7-168">Wenn Sie keinen Wert für `Credential` oder `PSRunAsCredential` (PS V.5) angeben, greift die Ressource mithilfe des Computerkontos des Zielknotens auf den `SourcePath` zu.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-168">If you do not specify a value for `Credential` or `PSRunAsCredential` (PS V.5), the resource will use the computer account of the target node to access the `SourcePath`.</span></span>  <span data-ttu-id="ca3d7-169">Wenn der `SourcePath` eine UNC-Freigabe ist, könnte dies zu einem „Zugriff verweigert“-Fehler führen.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-169">When the `SourcePath` is a UNC share, this could result in an "Access Denied" error.</span></span> <span data-ttu-id="ca3d7-170">Vergewissern Sie sich, dass Ihre Berechtigungen entsprechend festgelegt sind, oder verwenden Sie die Eigenschaften `Credential` oder `PSRunAsCredential`, um das Konto anzugeben, das verwendet werden sollte.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-170">Please ensure your permissions are set accordingly, or use the `Credential` or `PSRunAsCredential` properties to specify the account that should be used.</span></span>

## <a name="present-vs-absent"></a><span data-ttu-id="ca3d7-171">„Present“ im Vergleich zu „Absent“</span><span class="sxs-lookup"><span data-stu-id="ca3d7-171">Present vs. Absent</span></span>

<span data-ttu-id="ca3d7-172">Jede DSC-Ressource führt auf Grundlage des Werts, den Sie für die `Ensure`-Eigenschaft angeben, verschiedene Vorgänge aus.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-172">Each DSC resource performs different operations based on the value you specify for the `Ensure` property.</span></span> <span data-ttu-id="ca3d7-173">Die Werte, die Sie für die oben aufgeführten Eigenschaften angeben, bestimmen den ausgeführten Statusvorgang.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-173">The values you specify for the above properties determines the state operation performed.</span></span>

### <a name="existence"></a><span data-ttu-id="ca3d7-174">Vorhandensein</span><span class="sxs-lookup"><span data-stu-id="ca3d7-174">Existence</span></span>

<span data-ttu-id="ca3d7-175">Wenn Sie nur einen `DestinationPath` angeben, stellt die Ressource sicher, ob der Pfad vorhanden (`Present`) oder nicht vorhanden ist (`Absent`).</span><span class="sxs-lookup"><span data-stu-id="ca3d7-175">When you only specify a `DestinationPath`, the resource ensures that the path exists (`Present`) or does not exist (`Absent`).</span></span>

### <a name="copy-operations"></a><span data-ttu-id="ca3d7-176">Kopiervorgänge</span><span class="sxs-lookup"><span data-stu-id="ca3d7-176">Copy Operations</span></span>

<span data-ttu-id="ca3d7-177">Wenn Sie einen `SourcePath` und einen `DestinationPath` mit dem `Type`-Wert **Directory** angeben, kopiert die Ressource das Quellverzeichnis in den Zielpfad.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-177">When you specify a `SourcePath` and a `DestinationPath` with a `Type` value of **Directory**, the resource copies source directory to the destination path.</span></span> <span data-ttu-id="ca3d7-178">Die Eigenschaften `Recurse`, `Force` und `MatchSource` ändern den Typ des ausgeführten Kopiervorgangs, während `Credential` bestimmt, welches Konto zum Zugriff auf das Quellverzeichnis verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-178">The properties `Recurse`, `Force`, and `MatchSource` change the type of copy operation performed, while `Credential` determines which account to use to access the source directory.</span></span>

### <a name="limitations"></a><span data-ttu-id="ca3d7-179">Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="ca3d7-179">Limitations</span></span>

<span data-ttu-id="ca3d7-180">Wenn Sie den Wert `ReadOnly` für die `Attributes`-Eigenschaft zusammen mit einem `DestinationPath` angeben würden, würde `Ensure = "Present"` den angegebene Pfad erstellen, während `Contents` den Inhalt der Datei festlegen würde.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-180">If you specified a value of `ReadOnly` for the `Attributes` property alongside a `DestinationPath`, `Ensure = "Present"` would create the path specified, while `Contents` would set the contents of the file.</span></span>  <span data-ttu-id="ca3d7-181">Ein `Absent`-Statusvorgang würde die `Attributes`-Eigenschaft vollständig ignorieren und jede Datei im angegebenen Pfad entfernen.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-181">An `Absent` state operation would ignore the `Attributes` property entirely, and remove any file at the specified path.</span></span>

## <a name="example"></a><span data-ttu-id="ca3d7-182">Beispiel</span><span class="sxs-lookup"><span data-stu-id="ca3d7-182">Example</span></span>

<span data-ttu-id="ca3d7-183">Im folgenden Beispiel werden ein Verzeichnis und seine Unterverzeichnisse unter Verwendung der Ressource „File“ von einem Pullserver auf einen Zielknoten kopiert.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-183">The following example copies a directory and its subdirectories from a pull server to a target node using the File Resource.</span></span> <span data-ttu-id="ca3d7-184">Wenn der Vorgang erfolgreich ist, schreibt die Ressource „Log“ eine Bestätigungsmeldung in das Ereignisprotokoll.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-184">If the operation succeeds, the Log resource writes a confirmation message to the event log.</span></span>

<span data-ttu-id="ca3d7-185">Das Quellverzeichnis ist ein auf dem Pullserver freigegebener UNC-Pfad (`\\PullServer\DemoSource`).</span><span class="sxs-lookup"><span data-stu-id="ca3d7-185">The source directory is a UNC path (`\\PullServer\DemoSource`) shared from the Pull Server.</span></span> <span data-ttu-id="ca3d7-186">Die `Recurse`-Eigenschaft gewährleistet, dass auch alle Unterverzeichnisse kopiert werden.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-186">The `Recurse` property ensures that all subdirectories are copied as well.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ca3d7-187">Der LCM auf dem Zielknoten wird standardmäßig im Kontext des lokalen Systemkontos ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-187">The LCM on the target Node executes in the context of the local system account by default.</span></span> <span data-ttu-id="ca3d7-188">Um Zugriff auf den **SourcePath** zu gewähren, erteilen Sie dem Computerkonto des Zielknotens entsprechende Berechtigungen.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-188">To grant access to the **SourcePath**, give the target Node's computer account appropriate permissions.</span></span> <span data-ttu-id="ca3d7-189">**Credential** und **PSDSCRunAsCredential** (v5) ändern beide den Kontext, den der LCM für den Zugriff auf den **SourcePath** verwendet.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-189">The **Credential** and **PSDSCRunAsCredential** (v5) both change the context the LCM uses to access the **SourcePath**.</span></span> <span data-ttu-id="ca3d7-190">Sie müssen weiterhin Zugriff auf das Konto gewähren, das für den Zugriff auf den **SourcePath** verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="ca3d7-190">You still need to grant access to the account that will be used to access the **SourcePath**.</span></span>

```powershell
Configuration FileResourceDemo
{
    Node "localhost"
    {
        File DirectoryCopy
        {
            Ensure = "Present" # Ensure the directory is Present on the target node.
            Type = "Directory" # The default is File.
            Recurse = $true # Recursively copy all subdirectories.
            SourcePath = "\\PullServer\DemoSource"
            DestinationPath = "C:\Users\Public\Documents\DSCDemo\DemoDestination"
        }

        Log AfterDirectoryCopy
        {
            # The message below gets written to the Microsoft-Windows-Desired State Configuration/Analytic log
            Message = "Finished running the file resource with ID DirectoryCopy"
            DependsOn = "[File]DirectoryCopy" # Depends on successful execution of the File resource.
        }
    }
}
```

<span data-ttu-id="ca3d7-191">Weitere Informationen zur Verwendung von **Credentials** in DSC finden Sie unter [Verwenden von Anmeldeinformationen mit DSC-Ressourcen](../../../configurations/runAsUser.md) oder [Optionen für Anmeldeinformationen in den Konfigurationsdaten](../../../configurations/configDataCredentials.md).</span><span class="sxs-lookup"><span data-stu-id="ca3d7-191">For more on using **Credentials** in DSC see [Run As User](../../../configurations/runAsUser.md) or [Config Data Credentials](../../../configurations/configDataCredentials.md).</span></span>
