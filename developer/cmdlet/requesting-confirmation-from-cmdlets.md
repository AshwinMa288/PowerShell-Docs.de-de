---
title: Bestätigung von-Cmdlets anfordern | Microsoft-Dokumentation
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- ConfirmImpact [PowerShell Programmer's Guide], described
- ShouldContinue [PowerShell Programmer's Guide], described
- user feedback [PowerShell Programmer's Guide], requesting
- ShouldProcess [PowerShell Programmer's Guide], described
- ConfirmPreference [PowerShell Programmer's Guide], described
ms.assetid: 37d6e87f-57b7-40bd-b645-392cf0b6e88e
caps.latest.revision: 13
ms.openlocfilehash: ec441831f5e3231a44c9875d1b6d2bf6280a6965
ms.sourcegitcommit: b6871f21bd666f9cd71dd336bb3f844cf472b56c
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 02/03/2019
ms.locfileid: "56853396"
---
# <a name="requesting-confirmation-from-cmdlets"></a><span data-ttu-id="35766-102">Anfordern der Bestätigung von Cmdlets</span><span class="sxs-lookup"><span data-stu-id="35766-102">Requesting Confirmation from Cmdlets</span></span>

<span data-ttu-id="35766-103">Cmdlets sollten Bestätigung anfordern, wenn sie sind im Begriff, eine Änderung am System vornehmen, die außerhalb der Windows PowerShell-Umgebung ist.</span><span class="sxs-lookup"><span data-stu-id="35766-103">Cmdlets should request confirmation when they are about to make a change to the system that is outside of the Windows PowerShell environment.</span></span> <span data-ttu-id="35766-104">Beispielsweise ist ein Cmdlet zum Hinzufügen eines Benutzerkontos oder einen Prozess beenden, sollte das Cmdlet erfordern, Bestätigung durch den Benutzer, bevor sie fortgesetzt wird.</span><span class="sxs-lookup"><span data-stu-id="35766-104">For example, if a cmdlet is about to add a user account or stop a process, the cmdlet should require confirmation from the user before it proceeds.</span></span> <span data-ttu-id="35766-105">Im Gegensatz dazu ist ein Cmdlet zu eine Windows PowerShell-Variablen zu ändern, muss das Cmdlet nicht eine Bestätigung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="35766-105">In contrast, if a cmdlet is about to change a Windows PowerShell variable, the cmdlet does not need to require confirmation.</span></span>

<span data-ttu-id="35766-106">Um Bestätigung anfordern, das Cmdlet angeben muss, dass sie die Bestätigungs-Anforderungen unterstützt, und aufgerufen werden muss die [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) und [ System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) (optional) Methoden zum Anzeigen einer Bestätigung-Request-Nachricht.</span><span class="sxs-lookup"><span data-stu-id="35766-106">In order to make a confirmation request, the cmdlet must indicate that it supports confirmation requests, and it must call the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) and [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) (optional) methods to display a confirmation request message.</span></span>

## <a name="supporting-confirmation-requests"></a><span data-ttu-id="35766-107">Anforderungen für unterstützende Bestätigung</span><span class="sxs-lookup"><span data-stu-id="35766-107">Supporting Confirmation Requests</span></span>

<span data-ttu-id="35766-108">Um Bestätigung Anforderungen zu unterstützen, muss das-Cmdlet Festlegen der `SupportsShouldProcess` Parameter des Attributs, das Cmdlet `true`.</span><span class="sxs-lookup"><span data-stu-id="35766-108">To support confirmation requests, the cmdlet must set the `SupportsShouldProcess` parameter of the Cmdlet attribute to `true`.</span></span> <span data-ttu-id="35766-109">Dies ermöglicht die `Confirm` und `WhatIf` Cmdlet-Parameter, die von Windows PowerShell bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="35766-109">This enables the `Confirm` and `WhatIf` cmdlet parameters that are provided by Windows PowerShell.</span></span> <span data-ttu-id="35766-110">Die `Confirm` Parameter ermöglicht den Benutzer die Steuerung, ob die Anforderung zur Bestätigung angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="35766-110">The `Confirm` parameter allows the user to control whether the confirmation request is displayed.</span></span> <span data-ttu-id="35766-111">Die `WhatIf` Parameter ermöglicht dem Benutzer, zu bestimmen, ob das Cmdlet eine Meldung angezeigt, oder die Aktion durchgeführt werden soll.</span><span class="sxs-lookup"><span data-stu-id="35766-111">The `WhatIf` parameter allows the user to determine whether the cmdlet should display a message or perform its action.</span></span> <span data-ttu-id="35766-112">Fügen Sie nicht manuell hinzu der `Confirm` und `WhatIf` Parameter an ein Cmdlet.</span><span class="sxs-lookup"><span data-stu-id="35766-112">Do not manually add the `Confirm` and `WhatIf` parameters to a cmdlet.</span></span>

<span data-ttu-id="35766-113">Das folgende Beispiel zeigt die Deklaration eines Cmdlet-Attributs, das Bestätigung-Anforderungen unterstützt.</span><span class="sxs-lookup"><span data-stu-id="35766-113">The following example shows a Cmdlet attribute declaration that supports confirmation requests.</span></span>

```csharp
[Cmdlet(VerbsDiagnostic.Test, "RequestConfirmationTemplate1",
        SupportsShouldProcess = true)]
```

## <a name="calling-the-confirmation-request-methods"></a><span data-ttu-id="35766-114">Aufrufen der Methoden der Bestätigung-Anforderung</span><span class="sxs-lookup"><span data-stu-id="35766-114">Calling the Confirmation request methods</span></span>

<span data-ttu-id="35766-115">Rufen Sie in der Cmdlet-Code, der [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) -Methode auf, bevor der Vorgang, der ändert das System ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="35766-115">In the cmdlet code, call the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method before the operation that changes the system is performed.</span></span> <span data-ttu-id="35766-116">Das Cmdlet so konzipieren, dass, auch wenn der Aufruf der Wert zurückgegeben `false`, der Vorgang nicht ausgeführt wird und das-Cmdlet verarbeitet den nächsten Vorgang.</span><span class="sxs-lookup"><span data-stu-id="35766-116">Design the cmdlet so that if the call returns a value of `false`, the operation is not performed, and the cmdlet processes the next operation.</span></span>

## <a name="calling-the-shouldcontinue-method"></a><span data-ttu-id="35766-117">Aufrufen der Methode "shouldcontinue"</span><span class="sxs-lookup"><span data-stu-id="35766-117">Calling the ShouldContinue Method</span></span>

<span data-ttu-id="35766-118">Die meisten Cmdlets Anforderung nur mit der Bestätigung der [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) Methode.</span><span class="sxs-lookup"><span data-stu-id="35766-118">Most cmdlets request confirmation using only the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method.</span></span> <span data-ttu-id="35766-119">Manchmal erfordert jedoch möglicherweise zusätzliche Bestätigung.</span><span class="sxs-lookup"><span data-stu-id="35766-119">However, some cases might require additional confirmation.</span></span> <span data-ttu-id="35766-120">In diesen Fällen ergänzen die [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) Aufrufen durch einen Aufruf der [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) Methode.</span><span class="sxs-lookup"><span data-stu-id="35766-120">For these cases, supplement the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) call with a call to the [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) method.</span></span> <span data-ttu-id="35766-121">Dies ermöglicht das Cmdlet oder den Anbieter, um den Umfang der genauere steuern die **Ja, alle** als Antwort auf die bestätigungsaufforderung.</span><span class="sxs-lookup"><span data-stu-id="35766-121">This allows the cmdlet or provider to more finely control the scope of the **Yes to all** response to the confirmation prompt.</span></span>

<span data-ttu-id="35766-122">Wenn ein Cmdlet Ruft die [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) -Methode, mit dem Cmdlet muss auch angeben einer `Force` switch-Parameter.</span><span class="sxs-lookup"><span data-stu-id="35766-122">If a cmdlet calls the [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) method, the cmdlet must also provide a `Force` switch parameter.</span></span> <span data-ttu-id="35766-123">Wenn der Benutzer gibt `Force` , wenn der Benutzer das-Cmdlet aufgerufen wird, sollten immer noch das-Cmdlet Aufrufen [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess), jedoch sollten sie den Aufruf von umgehen [ System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span><span class="sxs-lookup"><span data-stu-id="35766-123">If the user specifies `Force` when the user invokes the cmdlet, the cmdlet should still call [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess), but it should bypass the call to [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span></span>

<span data-ttu-id="35766-124">[System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) wird eine Ausnahme ausgelöst, wenn sie von einer nicht-interaktive Umgebung aufgerufen wird, in denen der Benutzer kann nicht aufgefordert werden.</span><span class="sxs-lookup"><span data-stu-id="35766-124">[System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) will throw an exception when it is called from a non-interactive environment where the user cannot be prompted.</span></span> <span data-ttu-id="35766-125">Hinzufügen einer `Force` Parameter wird sichergestellt, dass der Befehl noch ausgeführt werden kann, wenn sie in einer nicht-interaktive Umgebung aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="35766-125">Adding a `Force` parameter ensures that the command can still be performed when it is invoked in a non-interactive environment.</span></span>

<span data-ttu-id="35766-126">Das folgende Beispiel zeigt das Aufrufen von [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) und [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span><span class="sxs-lookup"><span data-stu-id="35766-126">The following example shows how to call [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) and [System.Management.Automation.Cmdlet.Shouldcontinue\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span></span>

```csharp
if (ShouldProcess (...) )
{
  if (Force || ShouldContinue(...))
  {
     // Add code that performs the operation.
  }
}
```

<span data-ttu-id="35766-127">Das Verhalten einer [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) Aufruf kann variieren, abhängig von der Umgebung, in der das-Cmdlet aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="35766-127">The behavior of a [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) call can vary depending on the environment in which the cmdlet is invoked.</span></span> <span data-ttu-id="35766-128">Verwenden die vorherigen Richtlinien helfen sicherzustellen, dass das Cmdlet konsistent mit anderen Cmdlets, unabhängig von der hostumgebung verhält.</span><span class="sxs-lookup"><span data-stu-id="35766-128">Using the previous guidelines will help ensure that the cmdlet behaves consistently with other cmdlets, regardless of the host environment.</span></span>

<span data-ttu-id="35766-129">Ein Beispiel eines Aufrufs der [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) -Methode finden Sie unter [wie Bestätigungen anfordern](./how-to-request-confirmations.md).</span><span class="sxs-lookup"><span data-stu-id="35766-129">For an example of calling the [System.Management.Automation.Cmdlet.Shouldprocess\*](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method, see [How to Request Confirmations](./how-to-request-confirmations.md).</span></span>

## <a name="specify-the-impact-level"></a><span data-ttu-id="35766-130">Geben Sie den Schweregrad</span><span class="sxs-lookup"><span data-stu-id="35766-130">Specify the Impact Level</span></span>

<span data-ttu-id="35766-131">Wenn Sie das Cmdlet erstellen, geben Sie den Schweregrad (der Schweregrad), der die Änderung.</span><span class="sxs-lookup"><span data-stu-id="35766-131">When you create the cmdlet, specify the impact level (the severity) of the change.</span></span> <span data-ttu-id="35766-132">Legen Sie den Wert der zu diesem Zweck die `ConfirmImpact` Parameter des Cmdlet-Attributs, hoch, Mittel oder niedrig.</span><span class="sxs-lookup"><span data-stu-id="35766-132">To do this, set the value of the `ConfirmImpact` parameter of the Cmdlet attribute to High, Medium, or Low.</span></span> <span data-ttu-id="35766-133">Sie können angeben, einen Wert für `ConfirmImpact` nur wenn Sie auch angeben, die `SupportsShouldProcess` Parameter für das Cmdlet.</span><span class="sxs-lookup"><span data-stu-id="35766-133">You can specify a value for `ConfirmImpact` only when you also specify the `SupportsShouldProcess` parameter for the cmdlet.</span></span>

<span data-ttu-id="35766-134">Für die meisten Cmdlets verfügen Sie nicht explizit angeben, über `ConfirmImpact`.</span><span class="sxs-lookup"><span data-stu-id="35766-134">For most cmdlets, you do not have to explicitly specify `ConfirmImpact`.</span></span>  <span data-ttu-id="35766-135">Verwenden Sie stattdessen die Standardeinstellung des Parameters, das Medium ist.</span><span class="sxs-lookup"><span data-stu-id="35766-135">Instead, use the default setting of the parameter, which is Medium.</span></span> <span data-ttu-id="35766-136">Setzen Sie `ConfirmImpact` auf hoch, wird standardmäßig der Vorgang bestätigt werden.</span><span class="sxs-lookup"><span data-stu-id="35766-136">If you set `ConfirmImpact` to High, the operation will be confirmed by default.</span></span> <span data-ttu-id="35766-137">Diese Einstellung für hoch Unterbrechungen führen Aktionen, wie z. B. das Neuformatieren eines Volumes für die Festplatte zu reservieren.</span><span class="sxs-lookup"><span data-stu-id="35766-137">Reserve this setting for highly disruptive actions, such as reformatting a hard-disk volume.</span></span>

## <a name="calling-non-confirmation-methods"></a><span data-ttu-id="35766-138">Aufrufen von Methoden für nicht-Bestätigung</span><span class="sxs-lookup"><span data-stu-id="35766-138">Calling Non-Confirmation Methods</span></span>

<span data-ttu-id="35766-139">Wenn das Cmdlet oder der Anbieter muss einer Nachricht senden, aber keine Bestätigung angefordert, können sie die folgenden drei Methoden aufrufen.</span><span class="sxs-lookup"><span data-stu-id="35766-139">If the cmdlet or provider must send a message but not request confirmation, it can call the following three methods.</span></span> <span data-ttu-id="35766-140">Vermeiden Sie die Verwendung der [System.Management.Automation.Cmdlet.Writeobject\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) Methode zum Senden von Nachrichten dieser Typen da [System.Management.Automation.Cmdlet.Writeobject\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) Ausgabe vermischt werden mit der normalen Ausgabe des Cmdlets oder der Anbieter erschwert das Skript schreiben.</span><span class="sxs-lookup"><span data-stu-id="35766-140">Avoid using the [System.Management.Automation.Cmdlet.Writeobject\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) method to send messages of these types because [System.Management.Automation.Cmdlet.Writeobject\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) output is intermingled with the normal output of your cmdlet or provider, which makes script writing difficult.</span></span>

- <span data-ttu-id="35766-141">Um Vorsicht des Benutzers und den Vorgang fortsetzen, das Cmdlet oder dem Anbieter kann Aufrufen der [System.Management.Automation.Cmdlet.Writewarning\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteWarning) Methode.</span><span class="sxs-lookup"><span data-stu-id="35766-141">To caution the user and continue with the operation, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.Writewarning\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteWarning) method.</span></span>

- <span data-ttu-id="35766-142">Um zusätzliche Informationen bereitzustellen, die der Benutzer abrufen können mithilfe der `Verbose` -Parameter, das Cmdlet oder Anbieter erreichen die [System.Management.Automation.Cmdlet.Writeverbose\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteVerbose) Methode.</span><span class="sxs-lookup"><span data-stu-id="35766-142">To provide additional information that the user can retrieve using the `Verbose` parameter, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.Writeverbose\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteVerbose) method.</span></span>

- <span data-ttu-id="35766-143">Um auf Debug-Ebene-Details für andere Entwickler oder für den Produktsupport bereitzustellen, das Cmdlet oder dem Anbieter kann rufen die [System.Management.Automation.Cmdlet.Writedebug\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteDebug) Methode.</span><span class="sxs-lookup"><span data-stu-id="35766-143">To provide debugging-level detail for other developers or for product support, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.Writedebug\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteDebug) method.</span></span> <span data-ttu-id="35766-144">Der Benutzer kann abrufen, diese Informationen mithilfe der `Debug` Parameter.</span><span class="sxs-lookup"><span data-stu-id="35766-144">The user can retrieve this information using the `Debug` parameter.</span></span>

<span data-ttu-id="35766-145">Cmdlets und Anbieter rufen Sie zuerst die folgenden Methoden zum Bestätigung anzufordern, bevor sie versuchen, einen Vorgang auszuführen, der ein System außerhalb der Windows PowerShell ändern:</span><span class="sxs-lookup"><span data-stu-id="35766-145">Cmdlets and providers first call the following methods to request confirmation before they attempt to perform an operation that changes a system outside of Windows PowerShell:</span></span>

- [<span data-ttu-id="35766-146">System.Management.Automation.Cmdlet.Shouldprocess</span><span class="sxs-lookup"><span data-stu-id="35766-146">System.Management.Automation.Cmdlet.Shouldprocess</span></span>](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess)

- [<span data-ttu-id="35766-147">System.Management.Automation.Provider.Cmdletprovider.Shouldprocess</span><span class="sxs-lookup"><span data-stu-id="35766-147">System.Management.Automation.Provider.Cmdletprovider.Shouldprocess</span></span>](/dotnet/api/System.Management.Automation.Provider.CmdletProvider.ShouldProcess)

<span data-ttu-id="35766-148">Zu diesem Zweck das Aufrufen der [System.Management.Automation.Cmdlet.Shouldprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) -Methode, die der Benutzer aufgefordert, bestätigen den Vorgang, der basierend auf wie der Benutzer den Befehl aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="35766-148">They do so by calling the [System.Management.Automation.Cmdlet.Shouldprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method, which prompts the user to confirm the operation based on how the user invoked the command.</span></span>

## <a name="see-also"></a><span data-ttu-id="35766-149">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="35766-149">See Also</span></span>

[<span data-ttu-id="35766-150">Schreiben eines Windows PowerShell-Cmdlets</span><span class="sxs-lookup"><span data-stu-id="35766-150">Writing a Windows PowerShell Cmdlet</span></span>](./writing-a-windows-powershell-cmdlet.md)
